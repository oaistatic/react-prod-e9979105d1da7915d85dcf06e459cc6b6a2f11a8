const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fk60q7ashpo2etbp.js","assets/dc2xxjkicf2pz0mj.js","assets/juy90og0wtbp77qa.js","assets/root-fv49dn40.css","assets/ckp56qklot786ulr.js","assets/conversation-small-j9iamy23.css","assets/hisrfv493df9w8hp.js","assets/hort3ndd4wla0a2j.js","assets/nqj34k5dky4x5suq.js","assets/oednpha5s5kodcso.js","assets/bjole7ch6p9fl0i3.js","assets/jrzcjkd32gzj18rp.js","assets/ctoge6bibgzva9ta.js","assets/gvmh4kt4ryn7x9gx.js","assets/g8shiwm7jpd74xmd.js","assets/btouzu0b6h5eiejj.js","assets/o6wb3ptvu0bk81yq.js","assets/dmfmxszxfbs8gsbx.js","assets/iacposgqe14fuloa.js","assets/o7zrzew6ugefv8n2.js","assets/abebcwj1m9mup3z6.js","assets/jsgl3b1bt1ozctr5.js","assets/ck00y48d3yzt8bq3.js","assets/hczymk9ojq2shlcf.js","assets/iiyyoj0wgh5vo89i.js","assets/debx62351e4myexq.js","assets/fsw0l5x3plwokimj.js","assets/euq7ybw4dhrsufo2.js","assets/f5uxfkqdhg7743lt.js"])))=>i.map(i=>d[i]);
import{aC as gs,e as V,ak as Ce,cf as ps,aQ as Qe,bU as fs,fK as xs,hJ as Dt,aF as ye,P as K,aG as Ss,b2 as ne,as as it,at as lt,fM as ct,f as q,dW as Wt,bj as ys,e3 as Cs,c8 as Lt,fd as dt,fb as Gt,dZ as ws,a5 as ut,cr as vs,e5 as bs,bd as we,a9 as Ms,ae as Xe,kJ as _s,dG as Ht,al as Ns,hC as js,ec as Ft,B as Ut,ar as z,R as de,dA as Ts,l6 as As,k as te,lH as mt,S as Ee,cz as zt,aY as Vt,l as Bt,b8 as xe,b9 as Se,l4 as ks,s as yt,N as Ct,iQ as Es,dS as Ps,dv as X,ds as qe,gj as wt,i4 as Os,i3 as vt,dt as Rs,gI as Is,gH as Ds,aV as Ws,a7 as Ls,fe as Gs,fl as Hs,di as Fs,hm as Us,hb as zs,du as bt,lI as Vs,dr as Bs,hn as Ys,eJ as ht,b as qs,bx as Qs,bv as gt,A as ot,dX as pt,bl as $s,i7 as Xs,bk as Ks,dY as Js,D as Mt,lJ as Zs,cx as ea,i as ta,j as sa,e2 as aa,g5 as oa,$ as na,iq as ra,fc as ia,fj as _t,fV as la,hB as ca,cy as da,fS as ua,lK as ma,j0 as ha,bA as ga,kx as pa}from"./dc2xxjkicf2pz0mj.js";import{h as Re,r as n,j as t,L as nt,M as ue,p as ft,d as fa,m as $e,f as xa,c as Ie,v as Sa,R as Yt,u as qt}from"./juy90og0wtbp77qa.js";import{mr as Qt,ak as xt,ms as ya,mt as $t,eC as Nt,mu as Ca,ap as jt,cX as wa,mv as va,bA as Xt,hn as ba,iN as Ma,d0 as Ke,o as St,dM as _a,mw as Na,mx as ja,U as Oe,my as Pe,cO as Tt,j4 as Ta,mz as Aa,eW as Kt,mA as ka,mB as Ea,mC as Pa,cR as Oa,lw as Ra,lu as Ia,mD as Da,l$ as Wa,li as La,h$ as Ga,mE as Ha,mF as Fa,mG as Ua,as as za,e as Jt,hT as Va,eS as Ba,ae as Ya,mH as M,kg as R,mI as qa,mJ as Qa,mK as At,d as $a,mL as kt,mM as Xa,ef as Ka,u as Ja,mN as Zt,mO as Za,es,kQ as eo,kR as to,hg as so,bz as ao,kW as oo,kT as no,kU as Et,mP as ro,mQ as io,kS as lo,eZ as co,dA as uo,jF as mo,mR as Pt,mS as ho,mT as go,mU as po,eM as fo,mV as ts,jI as xo,mW as So,mX as yo,mY as Co,mZ as wo,m_ as vo,m$ as bo,j$ as Mo,n0 as _o,n1 as No,n2 as jo,iG as To,Z as Ao,n3 as ko,n4 as Eo,n5 as Po,n6 as Oo,n7 as Ro,n8 as Io,n9 as Do,na as Wo,nb as Lo,nc as Go,nd as Ho,ne as Fo,nf as Uo,ng as zo}from"./ckp56qklot786ulr.js";import{P as Vo,u as Bo}from"./dmfmxszxfbs8gsbx.js";import{u as Je,C as ss,b as Yo}from"./o6wb3ptvu0bk81yq.js";import{e as qo}from"./btouzu0b6h5eiejj.js";import{u as Qo}from"./o7zrzew6ugefv8n2.js";import{M as $o,g as Xo,F as Ko,T as Jo}from"./iacposgqe14fuloa.js";import{S as Zo,T as en}from"./gxo2ppc4wrdtmw6p.js";import{u as as,T as rt,g as tn}from"./hisrfv493df9w8hp.js";import{g as sn,a as an,b as on,c as nn,V as rn}from"./cir7oqlbi88or9cr.js";import{C as ln,N as cn}from"./g8shiwm7jpd74xmd.js";import"./l7m4sdxmp3n9y1x8.js";const Ot=gs.button`max-w-28 xs:max-w-40 sm:max-w-60 md:max-w-none group flex cursor-pointer items-center gap-1 rounded-lg py-1.5 ${({$shimmer:s})=>s?"loading-shimmer":""} px-1 text-lg hover:bg-token-main-surface-secondary radix-state-open:bg-token-main-surface-secondary font-semibold text-token-text-secondary overflow-hidden whitespace-nowrap`;function dn({conversation:s,gizmoResource:e,elementRef:r}){const a=Ce(s.id,i=>i?.title??null)??s.title;return t.jsx(nt,{to:ba(s.id,e),children:t.jsx(ye.Item,{onSelect:()=>{K.logEventWithStatsig("Projects: Breadcrumb Picker Pick Conversation","chatgpt_web_projects_breadcrumb_picker_pick_conversation")},icon:Ma,children:t.jsx("div",{ref:r,children:a})},s.id)})}function un({gizmoId:s,clientThreadId:e,inMobileHeader:r,modelLabel:o}){const a=V(),i=Re(),C=Qt(),l=as(e,C,void 0,void 0,void 0),{data:x}=xt(s),{items:N,hasNextPage:d,fetchNextPage:S,isLoading:w,isFetchingNextPage:g}=ya(s),u=n.useRef(null),p=n.useCallback(f=>{w||f==null||(u.current?.disconnect(),u.current=new IntersectionObserver(D=>{D[0].isIntersecting&&d&&S()}),u.current.observe(f))},[w,d,S]);n.useEffect(()=>()=>{u.current?.disconnect()},[]);const[m,h,v]=Ce(e,f=>[f?.isLoading,f?.title??null,ne.getThreadTitleSource(f)]),y=ps(a).checkGate("1733239976"),{showEmptyState:A}=$t(e),_=i.formatMessage(Nt.newChatTitle),k=Ca(e);if(!x||A)return null;const j=h==null&&(Qe(e)||v===fs.NewChat),L=m?t.jsx(t.Fragment,{}):t.jsxs(Ot,{$shimmer:j,children:[t.jsxs("div",{className:"truncate",children:[k?t.jsx(va,{text:h??""}):h??_,t.jsx("span",{className:"bg-token-main-surface-secondary text-token-text-secondary relative bottom-[1px] mx-1 inline-block rounded-md px-1 text-xs leading-4",children:o})]}),t.jsx(Xt,{className:"icon-sm text-token-text-tertiary"})]}),I=x.gizmo.display.name;return t.jsxs("div",{className:"flex items-center gap-0 overflow-hidden px-2 py-1.5 whitespace-nowrap",children:[t.jsx(Ot,{children:t.jsx(nt,{className:"truncate",to:jt(a,x),children:I})}),t.jsxs(t.Fragment,{children:[t.jsx(xs,{className:"icon-sm text-token-text-tertiary"}),t.jsxs(Dt,{contentAlign:r?"center":"start",size:"small",onOpenChange:f=>{f&&K.logEventWithStatsig("Projects: Breadcrumb Picker Open","chatgpt_web_projects_breadcrumb_picker_open")},triggerButton:L,contentClassName:"max-h-[50dvh] overflow-y-scroll",children:[!y&&t.jsxs(ye.Sub,{onOpenChange:f=>{f&&K.logEventWithStatsig("Projects: Breadcrumb Picker Model Picker Open","chatgpt_web_projects_breadcrumb_picker_model_picker_open")},children:[t.jsx(ye.SubMenuTrigger,{children:t.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[t.jsx(ue,{id:"ilkdMh",defaultMessage:"Model"}),t.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:o})]})}),t.jsx(ye.Portal,{children:t.jsx(ye.SubContent,{onClick:()=>{K.logEventWithStatsig("Projects: Breadcrumb Picker Model Picker Select","chatgpt_web_projects_breadcrumb_picker_model_picker_select")},children:t.jsx(rt,{sections:l})})})]}),y&&t.jsx(rt,{sections:l}),!y&&t.jsxs(t.Fragment,{children:[t.jsx(nt,{to:jt(a,x),children:t.jsx(ye.Item,{onSelect:()=>{K.logEventWithStatsig("Projects: Breadcrumb Picker Pick New Chat","chatgpt_web_projects_breadcrumb_picker_pick_new_chat")},icon:wa,children:t.jsx(ue,{...Nt.newChatProjectDropdownItem,values:{name:`"${x.gizmo.display.name}"`}})},"new-chat")}),N.filter(f=>f.id!==e).map((f,D)=>{const c=d&&D===N.length-4?p:void 0;return t.jsx(dn,{elementRef:c,conversation:f,gizmoResource:x},f.id)}),g&&t.jsx("div",{className:"m-4 mb-5 flex justify-center",children:t.jsx(Ss,{})})]})]})]})]})}const mn=it(()=>lt(()=>import("./fk60q7ashpo2etbp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(s=>s.ThreadHeaderGizmoDropdown)),hn=({clientThreadId:s,shouldShowFinchSection:e,preferredModelId:r})=>{const o=Qt(),a=as(s,o,e,void 0,r);return t.jsx(rt,{sections:a})};function gn({clientThreadId:s,inMobileHeader:e,preferredModelId:r}){const o=V(),{modelsData:a}=Cs();Lt.useStoreWithInit({});const i=dt(),C=Gt(i),l=ws(),[x]=ft(),N=ut(),d=St(f=>f.shouldShowThreadModelPickerDot),S=N?.planType,w=_a(),{data:g}=vs(),u=g&&bs(g),p=Ce(s,f=>nn({ctx:o,clientThreadId:s,threadState:f,searchParams:x,planType:S,isModelSticky:!!w,hasPlusFeatures:u})),m=Re(),h=sn(p,a,m),v=an(p,a),{isUnauthenticated:y}=we(),A=!y&&S!==Ms.FREE||u,_=n.useMemo(()=>!Xe(o)||!Na(o,N,l,a)?!1:(ja()&&!d&&Oe.setThreadModelPickerAlertDot(!0),!0),[o,N,a,l,d]);if(C)return t.jsx("div",{className:"text-token-text-primary px-3 text-lg",children:Pe});A&&(Tt.markStart("ThreadModelSelector"),h!=null&&Tt.markRendered("ThreadModelSelector"));const k=v===_s.TITLE?t.jsx(t.Fragment,{children:h}):t.jsxs(t.Fragment,{children:[Pe," ",t.jsx("span",{className:"text-token-text-tertiary",children:h})]}),j=t.jsx("div",{children:A?k:Pe}),L=on(p,a),I=t.jsxs(Ta,{style:{viewTransitionName:"var(--vt-thread-model-switcher)"},"aria-label":h?m.formatMessage({id:"JrtGPQ",defaultMessage:"Model selector, current model is {modelLabel}"},{modelLabel:h}):"",children:[L?t.jsx(Ht,{label:p,side:"right",children:j}):j,t.jsx(Xt,{className:"icon-sm text-token-text-tertiary"}),d&&t.jsx(Aa,{color:"blue",className:"ms-1"})]});return a===void 0?I:t.jsx(Dt,{alignOffset:-4,size:"small",triggerButton:I,onOpenChange:f=>{K.logEvent("Toggle Model Switcher",{isOpen:f}),Ns.logEvent("toggle_model_switcher",null,{isOpen:String(f)})},contentAlign:e?"center":"start",testId:"model-switcher-dropdown",children:t.jsx(hn,{clientThreadId:s,shouldShowFinchSection:_,preferredModelId:r})})}function Rt({clientThreadId:s,inMobileHeader:e=!1}){const r=ct(s),o=V(),a=Ke(r),i=q(o,"3786438384"),{showEmptyState:C}=$t(s),{data:l}=xt(r),{data:x}=Wt(),N=ys(s),d=q(o,"1213809372"),S=q(o,"1854238036"),w=d||S,[g,u]=n.useState(!1);n.useEffect(()=>{if(!S||l?.gizmo.default_model==null||x?.models.get(l?.gizmo.default_model)==null)return;const h=setTimeout(()=>{u(!0)},500);return()=>clearTimeout(h)},[S,l?.gizmo.default_model,x]);const{modelLabel:p}=tn(N.id,x),m=t.jsx(gn,{clientThreadId:s,inMobileHeader:e,preferredModelId:l?.gizmo.default_model??void 0});return r==null||a&&i?m:a?C&&l?m:t.jsx(un,{modelLabel:p??"",gizmoId:r,clientThreadId:s,inMobileHeader:e}):t.jsxs(t.Fragment,{children:[t.jsx(mn,{clientThreadId:s,gizmoId:r,inMobileHeader:e,showGizmoModelPicker:w}),g&&S&&l?.gizmo.default_model!=null&&l.gizmo.default_model!==N.id&&t.jsx("div",{className:"text-token-text-tertiary ms-3 hidden max-w-md text-xs break-words md:block",children:t.jsx(ue,{id:"+eWXA4",defaultMessage:"Note: The creator recommends {modelTitle}. You are using {currentModelTitle}.",values:{modelTitle:x?.models.get(l.gizmo.default_model)?.title,currentModelTitle:N.title}})})]})}const os={spreadsheets:Wa,presentations:Da,actions:Ia,deep_research:Ra,suggested:Oa};function pn({clientThreadId:s}){const{isOdysseyMode:e}=Kt(s),r=yn(e),{keywords:o}=ka({clientThreadId:s});return!e||!r?null:t.jsx(fn,{groups:r,mentionKeywords:o})}function fn({groups:s,mentionKeywords:e}){const[r,o]=n.useState(null),a=Je(),[i,C]=n.useState(null),[l,x]=n.useState("suggested"),N=m=>{x(m),C(null)},d=n.useMemo(()=>s.find(h=>h.category.name===l)?.prompts??[],[s,l]);n.useEffect(()=>{d&&i!=null&&a.setText(d[i].prompt_string)},[a,d,i]),n.useEffect(()=>{e&&e.length>0&&a.resetTrackingKeywords(e)},[a,e]);const[S,w]=n.useState(()=>a.isEmpty());n.useEffect(()=>js(()=>{a.isEmpty$()&&w(!0)}),[a]),n.useEffect(()=>a.subscribe("keydown",m=>{if(!(m.isComposing||!S||d.length===0))switch(m.key){case"ArrowDown":{const h=i==null?0:Math.min(i+1,d.length-1);C(h);break}case"ArrowUp":{const h=i===0||i==null?null:i-1;C(h);break}default:{w(!1),C(null);break}}}),[a,i,S,d]),n.useEffect(()=>a.subscribe("click",()=>{w(!1),C(null)}),[a]);const g=n.useRef(null),[u,p]=n.useState(void 0);return Ft(()=>{g.current&&p(g.current.offsetWidth)},[l]),t.jsx(Ea,{horizontalPadding:"standard",horizontalMargin:"none",verticalMargin:"none",verticalPadding:"none",overflowY:"auto",children:t.jsx(Pa,{className:"h-full overflow-y-hidden",children:t.jsx($e.div,{className:"flex size-full flex-col",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t.jsxs("div",{className:"mt-5 flex flex-col items-center overflow-y-auto",children:[t.jsx("div",{className:"py-2",ref:g,children:t.jsx("div",{className:"flex flex-row flex-nowrap gap-2 overflow-x-auto",children:s.map(m=>t.jsx(xn,{category:m.category.name,displayName:m.category_display_name,selected:l===m.category.name,onSelect:()=>N(m.category.name)},m.category.name))})}),t.jsx("div",{className:"overflow-y-auto",children:t.jsx($e.ul,{className:"mt-1 flex flex-col",style:u?{width:u}:{},children:d.map((m,h)=>t.jsx(Sn,{prompt:m,rowIdx:h,selected:i===h,onSelect:()=>{K.logEvent("Agent Suggested Prompt Selected",{prompt_title:m.title,prompt_category:m.categories[0].name}),C(h),a.focus()},hoveredPromptIndex:r,setHoveredPromptIndex:o,totalRows:d.length},`${l}-${h}`))})})]})})})})}function xn({category:s,displayName:e,selected:r,onSelect:o}){const a=os[s],i=r?"text-token-text-primary":"text-token-text-secondary",C=r?"text-token-icon-primary":"text-token-icon-secondary";return t.jsx(Ut,{color:"secondary",onClick:o,icon:()=>t.jsx(a,{className:C}),className:z("border-token-bg-tertiary",r&&"bg-token-bg-tertiary","font-normal",i),children:e})}function Sn({prompt:s,rowIdx:e,selected:r,onSelect:o,hoveredPromptIndex:a,setHoveredPromptIndex:i,totalRows:C}){const l=n.useRef(null);n.useEffect(()=>{r&&l.current?.scrollIntoView({behavior:"auto"})},[r]);function x(){const d=Cn(s),S=d?os[d]:Ga;return t.jsx(S,{className:"text-token-icon-secondary size-5"})}const N=a===e||a===e+1;return t.jsxs($e.li,{ref:l,initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:e*.03},exit:{opacity:0,translateY:4},onMouseEnter:()=>i(e),onMouseLeave:()=>i(null),children:[t.jsxs("button",{className:z("hover:bg-token-bg-tertiary flex w-full flex-row items-center rounded-xl px-2 py-4 text-start"),onClick:o,type:"button",children:[t.jsx("div",{className:"flex flex-col items-center justify-center p-1",children:x()}),t.jsx("div",{className:"text-token-text-secondary flex-1 overflow-hidden pe-2 text-sm text-ellipsis whitespace-nowrap",children:s.title}),s.example_url?t.jsx("div",{className:"flex flex-col items-center justify-center pe-1",onClick:d=>{d.stopPropagation(),K.logEvent("Agent Suggested Prompt Example Clicked",{prompt_title:s.title,prompt_category:s.categories[0].name}),s.example_url&&(window.location.href=s.example_url)},children:t.jsx(La,{className:"text-token-icon-tertiary size-6.5 shrink-0"})}):null]}),e<C-1&&!N&&t.jsx("div",{className:"bg-token-bg-tertiary mx-4 mt-[-1px] h-[1px]"})]})}function yn(s){return fa({queryKey:["odyssey_suggested_prompts_all"],queryFn:async()=>await de.safeGet("/n7jupd_suggested_prompts_all"),enabled:s}).data?.prompt_groups}function Cn(s){const e=s.categories;if(e.length!==0)return e[0].name}function wn(s){"use forget";const e=Ie.c(5),{clientThreadId:r}=s;let o;e[0]!==s?(o=t.jsx(Mn,{...s}),e[0]=s,e[1]=o):o=e[1];let a;return e[2]!==r||e[3]!==o?(a=t.jsx(ss,{clientThreadId:r,children:o}),e[2]=r,e[3]=o,e[4]=a):a=e[4],a}function vn(s){"use forget";const e=Ie.c(21),{clientThreadId:r,headlineOption:o,currentModelId:a,isModelLoaded:i,overrideMessage:C}=s,l=mt(),x=za(),N=Je(),{isFocused:d,autocompletions:S}=Bt(N.store),w=d&&S.length>0;let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g={opacity:0},e[0]=g):g=e[0];const u=w?0:1;let p;e[1]!==u?(p={opacity:u},e[1]=u,e[2]=p):p=e[2];let m,h;e[3]===Symbol.for("react.memo_cache_sentinel")?(m={opacity:0},h={duration:.1},e[3]=m,e[4]=h):(m=e[3],h=e[4]);const v=x?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",y=w?"pointer-events-none":"",A=l?"@lg/thread:hidden":"lg:hidden";let _;e[5]!==v||e[6]!==y||e[7]!==A?(_=z("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden px-4",v,y,A),e[5]=v,e[6]=y,e[7]=A,e[8]=_):_=e[8];let k;e[9]!==o||e[10]!==C?(k=o==="CHATGPT_LOGO"?t.jsx(zt,{className:"inline-block h-12 w-12"}):t.jsx(ns,{headlineOption:o,overrideMessage:C}),e[9]=o,e[10]=C,e[11]=k):k=e[11];let j;e[12]!==r||e[13]!==a||e[14]!==i?(j=t.jsx($o,{isModelLoaded:i,currentModelId:a,clientThreadId:r}),e[12]=r,e[13]=a,e[14]=i,e[15]=j):j=e[15];let L;return e[16]!==k||e[17]!==j||e[18]!==p||e[19]!==_?(L=t.jsxs($e.div,{initial:g,animate:p,exit:m,transition:h,className:_,children:[k,j]}),e[16]=k,e[17]=j,e[18]=p,e[19]=_,e[20]=L):L=e[20],L}function bn({isQuorum:s,activeSystemHintType:e,isAnonModeEnabled:r,currentModelId:o}){if(s)return P.chatgptHipaa;if(e===Ee.Research)return P.deepResearchPlaceholder;const i=Gt(e);if(o==="n7jupd"||i)return P.whatCanIDo}function Mn(s){"use forget";const e=Ie.c(27),{clientThreadId:r,currentModelId:o,isModelLoaded:a}=s,i=V(),C=Je();let l;e[0]!==i?(l=Ts(i),e[0]=i,e[1]=l):l=e[1];const x=l,{isUnauthenticated:N}=we(),d=As();Ha(C);const S=te(i,"4031588851"),w=te(i,"3533083032",{disableExposureLog:!0}),g=N?w:S,u=mt(),p=g.get("headline_option","HELP_WITH"),m=dt(),h=!!x;let v;e[2]!==m||e[3]!==o||e[4]!==d||e[5]!==h?(v=bn({isQuorum:h,activeSystemHintType:m,isAnonModeEnabled:d,currentModelId:o}),e[2]=m,e[3]=o,e[4]=d,e[5]=h,e[6]=v):v=e[6];const y=v,A=u?"@lg/thread:items-end":"lg:items-end";let _;e[7]!==A?(_=z("flex items-center justify-center",A),e[7]=A,e[8]=_):_=e[8];const k=u?"@lg/thread:block":"lg:block";let j;e[9]!==k?(j=z("mb-7 hidden text-center @lg/thread:block",k),e[9]=k,e[10]=j):j=e[10];let L;e[11]!==p||e[12]!==y?(L=p==="CHATGPT_LOGO"?t.jsx(zt,{className:"inline-block h-12 w-12"}):t.jsx(ns,{headlineOption:p,overrideMessage:y}),e[11]=p,e[12]=y,e[13]=L):L=e[13];let I;e[14]!==j||e[15]!==L?(I=t.jsx("div",{className:j,children:L}),e[14]=j,e[15]=L,e[16]=I):I=e[16];let f;e[17]!==r||e[18]!==o||e[19]!==p||e[20]!==y||e[21]!==a?(f=t.jsx(vn,{headlineOption:p,clientThreadId:r,isModelLoaded:a,currentModelId:o,overrideMessage:y}),e[17]=r,e[18]=o,e[19]=p,e[20]=y,e[21]=a,e[22]=f):f=e[22];let D;return e[23]!==f||e[24]!==_||e[25]!==I?(D=t.jsxs("div",{className:_,children:[I,f]}),e[23]=f,e[24]=_,e[25]=I,e[26]=D):D=e[26],D}function _n(s){"use forget";const e=Ie.c(16),{headlineOption:r,overrideMessage:o}=s,a=function(c){const{name:H}=c;return t.jsx(Ht,{label:x.formatMessage(P.editNicknameTooltip),delayDuration:300,side:"top",children:t.jsx("button",{onClick:Tn,style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:jn,onMouseLeave:Nn,children:H})})};let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=function(){const c=[],H=[];c.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),H.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...c);const F=H[Math.floor(Math.random()*H.length)],se=`${c[Math.floor(Math.random()*c.length)]} | ${F}`;xe.setCookie(Se.headlineMessage,se)},e[0]=i):i=e[0];const C=i,l=function(){const c=xe.getCookie(Se.GreetingName),F=xe.getCookie(Se.headlineMessage)?.split("|"),J=F?.[0]?.trim(),se=F?.[1]?.trim();return{cookieName:c,isReadyForPersonalized:!!c&&c.length<=S,headline:J,namedHeadline:se}},x=Re(),N=V(),d=te(N,"1704793646"),S=d.get("name_char_limit",20),[w,g]=n.useState(l),{isUnauthenticated:u}=we(),p=Jt(),h=Va(!u&&!!p)?.data,v=Ba(),y=d.get("greeting_web",!1),A=d.get("full_name_llm",!1);let _,k;e[1]!==p||e[2]!==A||e[3]!==v||e[4]!==y||e[5]!==h?(_=()=>{if(y&&v){if(p&&h){const D=ks(h,p,A);xe.setCookie(Se.GreetingName,D),yt.count(Ct.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}C()}else xe.deleteCookie(Se.GreetingName),xe.deleteCookie(Se.headlineMessage)},k=[h,p,y,A,v],e[1]=p,e[2]=A,e[3]=v,e[4]=y,e[5]=h,e[6]=_,e[7]=k):(_=e[6],k=e[7]),n.useEffect(_,k);let j;e[8]!==l||e[9]!==v||e[10]!==y?(j=()=>{const D=()=>{if(y&&v){const{cookieName:c,isReadyForPersonalized:H}=l();g(F=>({...F,cookieName:c,isReadyForPersonalized:H}))}};return window.addEventListener("refreshGreeting",D),()=>window.removeEventListener("refreshGreeting",D)},e[8]=l,e[9]=v,e[10]=y,e[11]=j):j=e[11],n.useEffect(j);let L,I;e[12]!==v||e[13]!==y?(L=()=>{y&&v&&yt.count(Ct.MOONSHINE,"splashScreenV2.greeting_shown_web")},I=[y,v],e[12]=v,e[13]=y,e[14]=L,e[15]=I):(L=e[14],I=e[15]),n.useEffect(L,I);let f;return o?f=t.jsx(t.Fragment,{children:t.jsx(ue,{...o,values:{hipaa:t.jsx("span",{className:"text-token-interactive-label-accent-default",children:x.formatMessage(P.hipaa)})}})}):w.isReadyForPersonalized&&y?f=t.jsx(t.Fragment,{children:t.jsx(ue,{...st[w.namedHeadline??r].withName,values:{name:t.jsx(a,{name:w.cookieName??""},"name")}})}):y&&w.headline?f=x.formatMessage(st[w.headline].original):f=x.formatMessage(st[r].original),f}function Nn(s){s.currentTarget.className="text-inherit"}function jn(s){s.currentTarget.className="text-token-text-secondary"}function Tn(){Oe.setAutoHighlightNicknameInput(!0),Oe.openModal(Ya.UserContext)}function ns(s){"use forget";const e=Ie.c(25),{headlineOption:r,overrideMessage:o}=s,a=Vt(),i=n.useRef(null);let C;e[0]!==a?(C={isTempChatVisible:a,titleTranslate:0},e[0]=a,e[1]=C):C=e[1];const[l,x]=n.useState(C);let N,d;e[2]!==a?(N=()=>{x({isTempChatVisible:a,titleTranslate:a?-((i.current?.offsetHeight??0)-40):0})},d=[a],e[2]=a,e[3]=N,e[4]=d):(N=e[3],d=e[4]),Ft(N,d);const S=Re(),w=V();let g;e[5]!==w?(g=!Xe(w)&&(Fa(Es())||te(w,"2118136551").get("show_chatgpt_h1",!1)),e[5]=w,e[6]=g):g=e[6];const u=g;let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p={viewTransitionName:"var(--vt-splash-screen-headline)"},e[7]=p):p=e[7];let m;e[8]!==r||e[9]!==S||e[10]!==u||e[11]!==a||e[12]!==o||e[13]!==l.isTempChatVisible||e[14]!==l.titleTranslate?(m=u?t.jsx("h1",{className:"mb-4",children:S.formatMessage(P.chatgpt)}):t.jsx("h1",{className:z("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",l.isTempChatVisible?"invisible opacity-0":"opacity-100"),"aria-hidden":a,style:{transform:`translateY(${l.titleTranslate}px)`},children:t.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:t.jsx(_n,{headlineOption:r,overrideMessage:o})})}),e[8]=r,e[9]=S,e[10]=u,e[11]=a,e[12]=o,e[13]=l.isTempChatVisible,e[14]=l.titleTranslate,e[15]=m):m=e[15];const h=l.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-10 opacity-0";let v;e[16]!==h?(v=z("absolute bottom-0 motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",h),e[16]=h,e[17]=v):v=e[17];const y=!a;let A;e[18]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(Ua,{}),e[18]=A):A=e[18];let _;e[19]!==v||e[20]!==y?(_=t.jsx("div",{className:v,"aria-hidden":y,ref:i,children:A}),e[19]=v,e[20]=y,e[21]=_):_=e[21];let k;return e[22]!==_||e[23]!==m?(k=t.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:t.jsx("div",{children:t.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:p,children:[m,_]})})}),e[22]=_,e[23]=m,e[24]=k):k=e[24],k}const P=xa({chatgptHipaa:{id:"SplashScreenV2.chatgptHipaa",defaultMessage:"ChatGPT {hipaa}"},hipaa:{id:"common.hipaa",defaultMessage:"HIPAA"},whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"},chatgpt:{id:"SplashScreenV2.chatgpt",defaultMessage:"ChatGPT"},whatCanIDo:{id:"SplashScreenV2.whatCanIDo",defaultMessage:"What can I do for you?"}}),st={HELP_WITH:{original:P.whatCanIHelpWith,withName:P.whatCanIHelpWithWithName},WHERE_TO_START:{original:P.whereShouldWeStart,withName:P.whereShouldWeStartWithName},ASK_CHATGPT:{original:P.askChatgptAnything,withName:P.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:P.howCanIHelp,withName:P.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:P.goodToSeeYouWithName,withName:P.goodToSeeYouWithName},DIVE_IN:{original:P.diveInWithName,withName:P.diveInWithName},READY_WHEN_YOU_ARE:{original:P.readyWhenYouAre,withName:P.readyWhenYouAre},ON_YOUR_MIND:{original:P.onYourMind,withName:P.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:P.whatAreYouWorkingOn,withName:P.whatAreYouWorkingOn},AGENDA_TODAY:{original:P.agendaToday,withName:P.agendaToday},SHOULD_WE_BEGIN:{original:P.shouldWeBegin,withName:P.shouldWeBegin},WHAT_CAN_I_DO:{original:P.whatCanIDo,withName:P.whatCanIDo}},rs=4,An=7,kn=5,En=10*60*1e3,Pn=async({text:s,numCompletions:e,isUnauthenticated:r,isThreadUsingSearchMode:o=!1,autocompleteMode:a,activeSystemHintType:i})=>{try{return(r?await de.safePost("/conversation/experimental/generate_autocompletions_anon",{requestBody:{input_text:s,num_completions:e,in_search_mode:o,system_hint:i??void 0},authOption:ot.Anonymous}):await de.safePost("/conversation/experimental/generate_autocompletions",{requestBody:{input_text:s,num_completions:e,in_search_mode:o,system_hint:i??void 0}})).completions.map(l=>({id:Sa(),type:R.Autocomplete,title:l.slice(0,s.length),body:l.slice(s.length),oneliner:l,prompt:l,source:a}))}catch{return[]}},is=s=>te(s,Xe(s)?"4093727931":"312855442"),On=({clientThreadId:s,composerController:e,isGizmoThread:r,isNewThread:o,isProjectThread:a})=>{const[i,C]=ft(),l=i.get("forceShowNuxCASuggestion")==="true",x=V(),N=Bt(e.store,T=>T.showTaggingDropdown),d=dt(),[S,w]=n.useState([]),g=rs,u=n.useCallback(T=>{w(b=>{const E=typeof T=="function"?T(b):T;return Ps(E,b)?b:E})},[]),p=d===Ee.Search,{bingTrendingSuggestions:m,chatgptTrendingSuggestions:h,fetchBingTrendingSuggestions:v,fetchChatgptTrendingSuggestions:y}=Rn(),A=n.useRef({bing:0,chatgpt:0}),_=n.useRef(!1),[k,j]=n.useState(!1);n.useEffect(()=>e.subscribe("click",()=>j(!0)),[e]);const{isUnauthenticated:L}=we(),I=n.useCallback(T=>{const b=e.getCurrentText();return b&&at(T).startsWith(b.toLocaleLowerCase())},[e]),f=n.useCallback(T=>{const b=e.getCurrentText(),E=T.title+T.body;return I(T)?{...T,title:b,body:E.slice(b.length)}:{...T,title:E,body:""}},[e,I]),D=n.useCallback((T=!1)=>{u(b=>!b.some(I)&&b.length>0?[]:T?b:b.map(f))},[I,f,u]),c=Re(),H=n.useMemo(()=>({[M.Canvas]:[{type:R.Starter,title:c.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:c.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:M.Canvas},{type:R.Starter,title:c.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:c.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:M.Canvas},{type:R.Starter,title:c.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:c.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:M.Canvas},{type:R.Starter,title:c.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:c.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:M.Canvas}],[M.Image]:[{type:R.Starter,title:c.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:c.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:M.Image},{type:R.Starter,title:c.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:c.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:M.Image},{type:R.Starter,title:c.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:c.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:M.Image},{type:R.Starter,title:c.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:c.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:M.Image}],[M.ContextualAnswers]:[{type:R.Starter,title:c.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:c.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:t.jsx(Rs,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswers},{type:R.Starter,title:c.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:c.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:t.jsx(Is,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswers},{type:R.Starter,title:c.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:c.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:t.jsx(Ds,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswers},{type:R.Starter,title:c.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:c.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:t.jsx(qe,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswers}],[M.Slurm]:[{body:"",prompt:c.formatMessage({id:"4XPEhn",defaultMessage:"Summarize all recent files relevant to me"}),title:c.formatMessage({id:"4XPEhn",defaultMessage:"Summarize all recent files relevant to me"}),theme:M.Slurm,type:R.Starter},{body:"",prompt:c.formatMessage({id:"jIuX8Y",defaultMessage:"What’s happening this month?"}),title:c.formatMessage({id:"jIuX8Y",defaultMessage:"What’s happening this month?"}),theme:M.Slurm,type:R.Starter},{body:"",prompt:c.formatMessage({id:"iOuZMh",defaultMessage:"What files contain action items, or require follow-up?"}),title:c.formatMessage({id:"iOuZMh",defaultMessage:"What files contain action items, or require follow-up?"}),theme:M.Slurm,type:R.Starter},{body:"",prompt:c.formatMessage({id:"F5X2dt",defaultMessage:"What are some common themes across my files?"}),title:c.formatMessage({id:"F5X2dt",defaultMessage:"What are some common themes across my files?"}),theme:M.Slurm,type:R.Starter}],[M.ContextualAnswersNUX]:[{type:R.Starter,title:c.formatMessage({id:"BTu/JD",defaultMessage:"Summarize what changed in documents that I'm mentioned in"}),prompt:c.formatMessage({id:"BTu/JD",defaultMessage:"Summarize what changed in documents that I'm mentioned in"}),icon:t.jsx(qe,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswersNUX,category:X.GDRIVE_ACTION_CONNECTOR,data:{persona:"all",id:"1"}},{type:R.Starter,title:c.formatMessage({id:"U42BFE",defaultMessage:"What changed in the projects that I’m working on?"}),prompt:c.formatMessage({id:"L6X30C",defaultMessage:"What changed in the projects that I’m working on?"}),icon:t.jsx(wt,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswersNUX,category:X.GITHUB_CONNECTOR,data:{persona:"all",target:"research",id:"2"}},{type:R.Starter,title:c.formatMessage({id:"0w+ueN",defaultMessage:"Help me understand this codebase"}),prompt:c.formatMessage({id:"OlIEIs",defaultMessage:"Help me understand this codebase"}),icon:t.jsx(wt,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswersNUX,category:X.GITHUB_CONNECTOR,data:{persona:"all",target:"research",id:"3"}},{type:R.Starter,title:c.formatMessage({id:"iUzbht",defaultMessage:"Summarize my important emails from last week"}),prompt:c.formatMessage({id:"sinNjm",defaultMessage:"Summarize my important emails from last week"}),icon:t.jsx(Os,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswersNUX,category:X.GMAIL_CONNECTOR,data:{persona:"all",target:"research",id:"4"}},{type:R.Starter,title:c.formatMessage({id:"S2bYoI",defaultMessage:"Help me optimize my calendar"}),prompt:c.formatMessage({id:"FnH01N",defaultMessage:"Help me optimize my calendar"}),icon:t.jsx(vt,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswersNUX,category:X.GCAL_CONNECTOR,data:{persona:"all",target:"research",id:"5"}},{type:R.Starter,title:c.formatMessage({id:"8j/xZ1",defaultMessage:"When is my next doctors appointment?"}),prompt:c.formatMessage({id:"wRD4Es",defaultMessage:"When is my next doctors appointment?"}),icon:t.jsx(vt,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswersNUX,category:X.GCAL_CONNECTOR,data:{persona:"personal",target:"research",id:"6"}},{type:R.Starter,title:c.formatMessage({id:"uqvKMB",defaultMessage:"Summarize all recent documents or notes I've created or edited"}),prompt:c.formatMessage({id:"QCqApZ",defaultMessage:"Summarize all recent documents or notes I've created or edited"}),icon:t.jsx(qe,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswersNUX,category:X.GDRIVE_ACTION_CONNECTOR,data:{persona:"all",id:"7"}},{type:R.Starter,title:c.formatMessage({id:"sNYNgD",defaultMessage:"Create a summary of all documents I've created last week"}),prompt:c.formatMessage({id:"SZ6IRM",defaultMessage:"Create a summary of all documents I've created last week"}),icon:t.jsx(qe,{className:"h-full w-full"}),body:"",theme:M.ContextualAnswersNUX,category:X.GDRIVE_ACTION_CONNECTOR,data:{persona:"all",id:"8"}}]}),[c]),F=Ws(e.isEmpty$),J=Ls(),se=Gs(),Ze=!!(J?.isPersonalAccount()&&se),De=Hs(),ve=De.connectorLinks.size>0,me=Fs(),re=Us(me,zs.CONNECTOR_SETTING).platformConnectors.get(bt[X.GDRIVE_ACTION_CONNECTOR]),{isLoading:be,internalKnowledgeConfigs:B}=Vs(),G=(B?.filter(T=>T.user_connection_details.auth_status==="not_connected").length??0)>0,We=(re&&re.status!=="DISABLED_BY_ADMIN")??G,{availableConnectors:Me,isLoading:_e}=Bs(),{availableConnectors:tt,isLoading:Le}=Ys(),Q=Me.length>0&&!G&&!ve,Ne=Q?ht(x,"2546207663").get("enabled",!1):!1,he=n.useCallback((T,b)=>{if(b.type===R.Starter&&b.theme===M.ContextualAnswersNUX){const{data:E}=b,{link:U}=E;window.location.hash=U+`&suggestedPromptsText=${encodeURIComponent(b.prompt)}`,K.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_selected","chatgpt_contextual_answers_recommended_prompt_selected",{prompt_id:b.data?.id,prompt_position:b.data?.position}),T.preventDefault();return}},[]),ge=n.useMemo(()=>new qa({localStorageKey:qs.CARecommendedPromptsUpsell,schedule:{intervalMs:7*24*60*60*1e3},termination:{maxShows:3}}),[]);n.useEffect(()=>{if((!Q||!Ne||d!=null||!ge.shouldShow())&&!l||_e||be||Le||J==null)return;const T=new Set(Me.map(W=>W.type)),b=new Set(tt.map(W=>W.type)),E=J?.isPersonalAccount()?"personal":"team";let U=H[M.ContextualAnswersNUX].filter(W=>{if(W.data?.persona!==void 0&&W.data?.persona!==E&&W.data?.persona!=="all")return!1;const Y=W.category,ee=W.data?.target==="research";return Y===X.GDRIVE_ACTION_CONNECTOR?We:ee?b.has(Y):T.has(Y)});U.length<3||(U.sort(()=>Math.random()-.5),U=U.slice(0,g).map((W,Y)=>{const ee=W.category,Ae=W.data?.target==="research"?"research":"connectors",oe=`#settings/${Qs.Connectors}?connector=${bt[ee]}&add-connector-link=true&target=${Ae}`;return W.data={link:oe,id:W.data?.id,position:Y.toString()},W.onSelectOverride=he,{...W}}),u(W=>W.length>0?W:(_.current||(ge.recordShown(),K.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_shown","chatgpt_contextual_answers_recommended_prompt_shown",{prompts:U.map(Y=>Y.data?.id).join(","),shown_times:ge.getShownTimes().toString()}),_.current=!0),U)))},[H,g,u,Q,J,Ne,G,Me,_e,be,We,ve,De.connectorLinks,B,Ze,d,he,ge,l,Le,tt]);const ie=is(x);n.useEffect(()=>{const T=()=>{u(b=>b.filter(E=>E.theme!==M.Search&&E.theme!==M.ChatGPTTrending&&E.theme!==M.Image&&E.theme!==M.Slurm&&E.theme!==M.Tatertot&&E.theme!==M.ContextualAnswersNUX))};if(F&&o&&!r&&!a||l)if(p)u(m.length>0?m:[]),A.current.bing===0&&(A.current.bing=Date.now(),v());else if(ie.get("enabled",!1)&&!d){u(k&&h.length>0?h:[]);const b=Date.now(),E=A.current.chatgpt;(E===0||b-E>En)&&(A.current.chatgpt=b,y())}else if(d===Ee.PictureV2){const b=Xo(c);u(b)}else if(d===Ee.Tatertot)u(Qa(c));else if(d===Ee.Slurm){if(!i.get("suggestions-for-connector"))return;const E=H[M.Slurm];E.length>0&&u(E)}else{if(S.length>0&&S[0].theme===M.ContextualAnswersNUX)return;T()}else T()},[F,v,y,ie,p,u,m,h,d,k,c,s,o,r,a,H,i,C,S,l]),n.useEffect(()=>{if(F){const T=S.filter(b=>b.type!==R.Autocomplete);T.length>0&&At(T,s)}},[F,S,s]);const pe=g-S.filter(I).length,ae=Dn(p),je=te(x,"4031588851"),Te=je.get("autocomplete_min_char",4),Ge=je.get("autocomplete_fetch_interval",200),le=n.useRef(null),Z=n.useCallback($a(async T=>{const b=e.getCurrentText();if(!b||b.length<Te||b.length>80||e.hasMultipleLines()){u([]);return}if(!N&&!(le.current&&le.current.length>Te&&b.startsWith(le.current)))try{const E=(await Pn({text:b,numCompletions:T,isUnauthenticated:L,isThreadUsingSearchMode:p,autocompleteMode:ae,activeSystemHintType:d})).filter(I).map(f);u(U=>{const W=U.filter(I),Y=E.filter(ee=>{const ce=at(ee);return!W.some(Ae=>{const oe=at(Ae);if(ce===oe)return!0;const ze=/[\p{P}\p{S}]$/u,Ve=ce.replace(ze,""),$=oe.replace(ze,"");return Ve===oe||ce===$||Ve===$})}).slice(0,g-W.length);return[...W,...Y]}),E.length>0&&At(E,s)}catch{}},ae==="BING"?150:Ge),[e,ae,f,Ge,d]),He=n.useCallback(()=>{D(),pe>0&&Z(pe)},[Z,D,pe]);n.useEffect(()=>{N&&u([])},[N,u]);const fe=n.useMemo(()=>ae==="HARDCODED"?D:He,[ae,He,D]),Fe=n.useCallback(()=>{fe()},[fe]),Ue=n.useCallback(()=>{e instanceof Vo&&D(!0),e.getCurrentText().indexOf(`
`)>0&&u([])},[e,u,D]);return n.useEffect(()=>e.subscribe("input",()=>{Fe()}),[e,Fe]),n.useEffect(()=>e.subscribe("change",()=>{Ue()}),[e,Ue]),{autocompletions:S}},Rn=()=>{const[s,e]=n.useState([]),[r,o]=n.useState([]),a=gt(),i=V(),C=is(i),l=C.get("num_mobile_results",kn),x=C.get("num_desktop_results",An),N=n.useCallback(async()=>{const w=(await de.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:rs},authOption:ot.SendIfAvailable})).suggestions.map((g,u)=>({type:R.Trending,title:It(g),body:"",icon:t.jsx(kt,{className:"h-full w-full"}),prompt:It(g),id:`search-trending-${u}`,theme:M.Search}));return e(w),w},[]),d=n.useCallback(async()=>{const w=(await de.safeGet("/trending/chatgpt",{parameters:{query:{num_items:a?x:l}},authOption:ot.SendIfAvailable})).topics.map((g,u)=>({type:R.Trending,title:g.title,body:"",icon:t.jsx(kt,{className:"h-full w-full"}),prompt:g.prompts[Math.floor(Math.random()*g.prompts.length)],id:`chatgpt-trending-${u}`,theme:M.ChatGPTTrending}));return o(w),w},[a,l,x]);return{bingTrendingSuggestions:s,chatgptTrendingSuggestions:r,fetchBingTrendingSuggestions:N,fetchChatgptTrendingSuggestions:d}};function It(s){return s.split(" ").map(Xa).join(" ")}const at=s=>`${s.title}${s.body}`.toLocaleLowerCase();function In(){const s=V(),r=te(s,"4031588851",{disableExposureLog:!0}).get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),o=Jt();return!!o&&o.created*1e3>=new Date(r).getTime()}function Dn(s){const{isUnauthenticated:e}=we(),r=V(),o=q(r,"1468311859"),a=q(r,"2053937752"),i=q(r,"3664702598"),C=q(r,"471233253"),l=te(r,"4031588851"),x=te(r,"3533083032"),N=In(),d=!e&&o||e&&a,S=(!e&&i||e&&C)&&N;let w="HARDCODED";{const g=e?x:l;if(s){const u=g.get("search_autocomplete_mode","");d&&u&&(w=u)}else S&&(w=g.get("autocomplete_mode","HARDCODED"))}return w}const Wn=({clientThreadId:s,isGizmoThread:e,isNewThread:r,isProjectThread:o})=>{const a=Je(),{autocompletions:i}=On({clientThreadId:s,composerController:a,isGizmoThread:e,isNewThread:r,isProjectThread:o});return n.useEffect(()=>(a.store.setState({autocompletions:i}),()=>{a.store.setState({autocompletions:[]})}),[i,a]),null},Ln=({clientThreadId:s})=>{const e=V(),r=St(g=>g.activeStageSidebar),o=pt(s),a=Ka($s.WorkspaceShareLinks),{isUnauthenticated:i}=we(),C=Vt(),l=ct(s),x=Ke(l),N=q(e,"16480203"),d=Ja(),S=a&&o&&!i&&!C&&(!x||N)&&!d,w=!r;return t.jsx("div",{className:"flex items-center",id:"conversation-header-actions",children:t.jsx(ln,{showShareButton:S,showProfileDropdown:w,clientThreadId:s})})},Gn=it(()=>lt(()=>import("./bjole7ch6p9fl0i3.js"),__vite__mapDeps([10,2,1,3,11,12,4,5,13,14,15,16,17,18,19,20,8,7,21,22,23,6,24,9,25])).then(s=>s.GizmoUsingAsOwnerNotice));function Hn({clientThreadId:s,transparentBackground:e,isEmptyState:r}){const o=V(),a=Zt(o),i=ct(s),C=Ke(i),l=Za(),{data:x}=xt(i),N=ut(),d=gt(),S=Xs(),w=Qe(s),g=St(j=>j.isConversationScrolledFromTop),u=Ce(s,j=>ne.hasUserMessage(j))||!w,p=es(),m=p&&S,{shouldShowCenterGetTeamPill:h}=eo(s,m),{shouldShowLeftGetPlusPill:v,shouldShowCenterGetPlusPill:y}=to(s,m),A=!Xe(o)&&!u&&ht(o,"1697094676").get("hide_dropdown",!1),_=d&&(C||!i)?t.jsx(io,{children:t.jsx(lo,{children:v?t.jsx("div",{className:"text-token-text-primary px-3 text-lg",children:Pe}):A?null:t.jsx(Rt,{clientThreadId:s})})}):v?t.jsx("div",{className:"text-token-text-primary px-3 text-lg",children:Pe}):A?null:t.jsx(Rt,{clientThreadId:s}),k=t.jsx(co,{clientThreadId:s,children:t.jsx(Ln,{clientThreadId:s})});return t.jsxs(t.Fragment,{children:[t.jsxs(so,{id:"page-header",className:z("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition max-md:hidden",r&&"absolute start-0 end-0",C&&w&&"sharp-edge-on-scroll-start sticky top-0",!i&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:shadow-none!",!i&&!p&&"@[84rem]/thread:bg-transparent",e&&!p&&"bg-transparent",!a&&g?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",a&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]",g&&y&&"@[84rem]/thread:bg-token-main-surface-primary @[84rem]/thread:[box-shadow:var(--sharp-edge-top-shadow)]!"),children:[t.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[x!=null&&N?.isWorkspaceAccount()&&x.gizmo.tags?.includes(ao.WorkspaceDisabled)&&t.jsx(Gn,{gizmo:x}),t.jsx(oo,{gizmoId:i,clientThreadId:s}),h?t.jsx(no,{}):y?t.jsx(Et,{}):null,m&&t.jsx(Zo,{})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(cn,{clientThreadId:s}),_,v&&!h&&t.jsx(Et,{})]}),t.jsx("div",{className:"flex items-center",children:k})]}),l&&t.jsx(ro,{})]})}const Fn=it(()=>lt(()=>import("./fsw0l5x3plwokimj.js"),__vite__mapDeps([26,2,4,1,3,5,27,28])));function Un({clientThreadId:s}){const e=qt(),r=pt(s),o=Ce(s,ne.getGizmoId),a=async()=>{r&&(await de.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:r}},requestBody:{is_archived:!1},intercomEventOnError:"fetch-error:conversation:edit"}),e.invalidateQueries({queryKey:["conversation",s]}),ga(r,i=>{i.isArchived=!1}),ts(e,o))};return t.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:t.jsx(ue,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),t.jsx("div",{children:t.jsx(Ut,{disabled:!r,onClick:a,icon:Ho,children:t.jsx(ue,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const zn=function({clientThreadId:s,getGizmosCompletionParams:e,hideDisclaimer:r,hideHeader:o,messagesVerticalAlign:a="top",renderEmptyState:i}){"use forget";const C=Ks(),l=V(),x=Zt(l),N=gt(),{data:d}=Wt(),S=uo(s),w=Js(),[g,u,p,m,h,v,y,A]=Ce(s,O=>[O?.isLoading,ne.getCurrentLeafId(O),ne.hasUserMessage(O),ne.getConversationTurns(O).length,ne.isArchived(O),O?.modelId,O?ne.getGizmoId(O):w,O?.conversationOrigin===pa.APPLE]),_=pt(s),k=qt(),{prefetchSearchPromises:j}=Yo(),[L]=ft(),I=!!L.get("message"),[f]=n.useState(j?.query),[D,c]=n.useState(j?.navlink);n.useEffect(()=>{g||(Qe(s)?Mt.addTiming("chatgpt.web.chatPage.renderNewConversation"):Mt.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[s,g]);const{setTargetedContent:H}=mo(),F=C?.includes(Zs),J=null,se=m>=2,Ze=q(l,"1909635392"),De=n.useContext(ea),[ve,me]=ta(O=>[sa(O),aa(O)]),et=oa(),re=es(),{isOpen:be}=Qo(),B=!!y,G=Qe(s)&&!se&&(Pt(S)||S?.kind===na.GizmoTest)&&!et&&!re&&j==null&&(!ve||B),We=q(l,"733205176"),Me=q(l,"537200474");ho(_,We),go();const _e=G&&!p&&j==null&&(!ve||B),Le=ra(d).id,Q=v??Le,Ne=!!v,he=Lt.useStore();n.useEffect(()=>{if(Q===ia)return he.setActiveSystemHint(_t,{locked:!0,analyticsMetadata:{clientThreadId:s}}),()=>{he.setActiveSystemHint(null,{locked:!1,ifPrevSystemHint:_t,analyticsMetadata:{clientThreadId:s}})}},[Q,he,s]);const ge=la(d?.models,Q),ie=po(s,S),pe=fo();n.useEffect(()=>{pe||H(void 0)},[s,H,pe,u]),n.useEffect(()=>{Oe.setIsConversationScrolledFromTop(!1)},[s]),n.useEffect(()=>{const O=new URLSearchParams(window.location.search),ke=O.get("src");if(ke==="history_search"){O.delete("src");const Ye=O.toString(),hs=`${window.location.pathname}${Ye?`?${Ye}`:""}${window.location.hash}`;window.history.replaceState({},document.title,hs)}_&&ke==="history_search"&&de.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:_}},requestBody:{touch:!0},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{ts(k,y)})},[_,y,k]);const ae=Bo(s),je=n.useCallback(O=>{ae(e?e(O):O)},[ae,e]),Te=xo(),Ge=ca(),le=n.useRef(null);le.current=O=>{G&&!Ge&&ht(l,"3253785454").get("should_animate_composer",!1)?So({className:zo["composer-slide"],update:()=>je(O)}):je(O)};const Z=n.useCallback(O=>le.current?.(O),[le]);n.useEffect(()=>{Te.signalTransitionReady()},[Te,s]),yo(),Co(s,Z),wo(s);const He=vo({clientThreadId:s,handleRequestCompletion:Z,prefetchSearchThreadIdPromise:j?.threadId})&&f==null,fe=n.useRef(null),Fe=O=>{if(x)return t.jsx(Fo,{allowScrollToEnd:!me,allowScrollToTop:!me&&A,clientThreadId:s,initScrolledToEnd:f==null&&!I,threadFooterRef:ee,threadRootRef:W,children:O});{const ke=t.jsx("div",{className:"relative h-full",children:t.jsxs("div",{className:z("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges] @[84rem]/thread:pt-(--header-height)"),ref:fe,children:[t.jsx(ma,{setIsScrolledToEdge:Ye=>{Oe.setIsConversationScrolledFromTop(Ye)},options:{root:fe?.current}}),O]})});return f!=null?ke:t.jsx(ha,{children:t.jsxs(n.Suspense,{fallback:null,children:[t.jsx(Uo,{}),ke]})})}};n.useEffect(()=>{re||(document.title=ie??"ChatGPT")},[ie,J,re]);const Ue=da(De),T=ut(),b=T&&!T.isTeam()&&!T.isEnterprisey(),E=!r&&!Ue&&!me&&!(G&&b)&&Pt(S),U=Kt(s).isOdysseyMode,W=n.useRef(null),Y=n.useRef(null),ee=n.useRef(null),ce=bo(O=>O.composerHeight),Ae=n.useMemo(()=>({threadContentScrollContainerElementRef:Y,footerRootContainerElementRef:ee}),[]),oe=!G&&!be,ze=mt(),Ve=Ke(y),$=B&&Ve,Be=!$,ls=G,cs=n.useCallback(()=>c(void 0),[]),{isSingleLine:ds}=Mo();function us(){return g||He?null:_e?i??t.jsx(t.Fragment,{children:B?t.jsx(qo,{clientThreadId:s,gizmoId:y,onRequestCompletion:Z,currentModelId:Q}):t.jsx(wn,{clientThreadId:s,currentModelId:Q,isModelLoaded:Ne})}):se||f!=null?Fe(t.jsx(en,{onRequestCompletion:Z,clientThreadId:s,scrollContainerRef:fe,pageLoadSearchQuery:f,prefetchNavlink:D,clearPrefetchNavlink:cs},s)):null}const ms=q(l,"422449809");return t.jsx(_o.Provider,{value:D?"user-query-with-navlink":f?"user-query":null,children:t.jsx(No,{serverThreadId:_,children:t.jsx(jo,{clientThreadId:s,children:t.jsxs(ss,{clientThreadId:s,children:[t.jsx(Bn,{clientThreadId:s,conversationTurnsLength:m}),F&&t.jsx(Fn,{}),!re&&t.jsx(To,{children:ie!=null&&t.jsx("title",{children:ie})}),t.jsx(ua.Provider,{value:Z,children:t.jsxs(Ao,{children:[t.jsx("div",{id:"thread",ref:W,className:z("group/thread @container/thread h-full w-full",x&&Oo.threadRoot),children:t.jsxs(Ko,{noKeyboard:!0,clientThreadId:s,currentModelConfig:ge,className:z("composer-parent flex h-full flex-col focus-visible:outline-0",!$&&"overflow-hidden"),children:[t.jsxs(ko,{value:Ae,children:[!o&&t.jsx(Hn,{clientThreadId:s,isEmptyState:_e}),Ze&&t.jsx(Eo,{clientThreadId:s}),t.jsxs("div",{ref:Y,className:z("flex basis-auto flex-col",oe&&"-mb-(--composer-overlap-px)",oe&&(ds?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),$||B||!G?"grow":"shrink",!G&&"overflow-hidden",G&&!$&&!B&&"min-[510px]:max-[768px]:mt-[25dvh]! @max-[31.9rem]/thread:grow @max-[31.9rem]/thread:justify-center @lg/thread:mt-[calc(30dvh+25px)]"),style:{"--composer-height":ce?`${ce}px`:void 0},children:[us(),!1]})]}),t.jsxs("div",{id:"thread-bottom-container",className:z("content-fade relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",G&&"min-h-0",!E&&!me&&!U&&"mb-4",B||$||!G?"":Be&&G&&ze?"@lg/thread:grow":"lg:grow",Be&&"flex flex-col"),ref:ee,children:[h?t.jsx(Un,{clientThreadId:s}):t.jsxs(t.Fragment,{children:[(!G||Be)&&!be&&t.jsxs(t.Fragment,{children:[t.jsx(Yn,{isGizmoThread:B,isProjectThread:$,clientThreadId:s,isNewThread:G,currentModelId:Q,onRequestCompletion:Z,shouldUseUnifiedComposer:Be,isModelLoaded:Ne}),N&&G&&Me&&t.jsx(pn,{clientThreadId:s})]}),ls&&t.jsx(Wn,{clientThreadId:s,isGizmoThread:B,isNewThread:G,isProjectThread:$})]}),E?t.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:t.jsx(Po,{clientThreadId:s})}):null]})]})}),t.jsx(Ro,{clientThreadId:s,isStaticSharedThread:!1,isDynamicSharedThread:et}),t.jsx(Io,{}),ms&&t.jsx(Do,{}),t.jsx(rn,{conversationId:s}),t.jsx(Wo,{}),t.jsx(Lo,{conversationId:s}),!1]})})]})})})})},rr=Yt.memo(zn);function Vn({clientThreadId:s,conversationTurnsLength:e}){return Go(e,s),null}const Bn=Yt.memo(Vn);function Yn(s){return t.jsx(Jo,{...s})}export{Ln as C,rr as M,Rt as T};
//# sourceMappingURL=clbhua3y9f3awxpf.js.map
