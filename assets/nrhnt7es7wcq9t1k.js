import{h,r as u,j as e,M as g,A as x,m as b}from"./juy90og0wtbp77qa.js";import{ar as w,fK as j,dG as v}from"./dc2xxjkicf2pz0mj.js";import{bA as N,f9 as k,fa as f}from"./ckp56qklot786ulr.js";import{p as F,g as L}from"./kf8hvybx3i6ev42e.js";import{F as T}from"./nn7xc4uuvn0ciuok.js";import{W as y}from"./o46eutw3gegbydjq.js";import"./drv35vu8fh8i9zl0.js";import"./hesgehv7nq0kfowp.js";import"./fzrn137102spawew.js";import"./iq982ga1lltyy4ue.js";import"./l3xu29fndg9f5mv3.js";import"./o6wb3ptvu0bk81yq.js";import"./dmfmxszxfbs8gsbx.js";import"./mq5kqcvga15eqze5.js";import"./dq2hdjj12gdqq0p1.js";import"./jsgl3b1bt1ozctr5.js";import"./lsldnobv7eet27pa.js";import"./ibqg5gvcvb5336z5.js";import"./lzfgwrifvgqibt3v.js";import"./m36qabefvxegdn1g.js";import"./f5x7owcyj5iwmbsb.js";import"./llrie03z1kvfi4vu.js";import"./pc2givv05uuq8g6l.js";import"./ezqsz68yx4uzdtqb.js";import"./mre9dehcylnm0d4q.js";import"./enyyaj5d41xdxtkn.js";import"./v62rnx2jst6ga6cm.js";import"./lptwpbjabrvjmhsj.js";import"./cfod2v11dallp8kv.js";import"./l7m4sdxmp3n9y1x8.js";import"./f5uxfkqdhg7743lt.js";import"./jbze7lwlszm657iq.js";import"./h0zoartyn6ddtvom.js";const C="_glow_1o0tc_1",d={glow:C};function M({diffFiles:t,onClickFile:n,startOpen:m=!1,isActive:a=!1}){const l=h(),[s,c]=u.useState(m);return t.length?e.jsxs("div",{className:w("bg-token-bg-primary flex flex-col rounded-2xl border",a?"border-token-border-heavy outline-2 outline-black/5":"border-token-border-light"),children:[e.jsx("button",{className:"cursor-pointer p-2 focus-visible:outline-0",onClick:()=>{t.length&&n?.(t[0]),(a||!s)&&c(!s)},"aria-label":l.formatMessage({id:"wham.diff.changedFileList.titleAriaLabel",defaultMessage:"Toggle file list diffs"}),children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"gap-1 px-2 py-1 text-sm",children:e.jsx("span",{className:"text-token-text-primary font-medium",children:e.jsx(g,{id:"wham.diff.changedFileList.title",defaultMessage:"{numFiles, plural, one {File ({numFiles})} other {Files ({numFiles})}}",values:{numFiles:t.length}})})}),s?e.jsx(N,{className:"icon"}):e.jsx(j,{className:"icon"})]})}),e.jsx(x,{initial:!m,children:s&&e.jsx(b.ul,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.1},className:"overflow-clip px-2 pb-2",children:t.map((r,o)=>{const p=`${r._oldFileName??o}-${r._newFileName}`;return e.jsx(R,{diffFile:r,onClick:()=>n?.(r)},p)})})})]}):null}function R({diffFile:t,onClick:n}){const m=h(),a=u.useRef(null),l=u.useRef(null),s=u.useRef(null),[c,r]=u.useState(!1),o=L(t),p=`${t._oldFileName??""}-${t._newFileName}`;return e.jsx("li",{className:"group w-full",children:e.jsx(v,{label:o,labelTextAlign:"left",open:c?void 0:!1,children:e.jsxs("button",{className:"hover:bg-token-border-light after:bg-token-border-light relative flex h-10 w-full items-center justify-start rounded-lg px-2 text-sm after:absolute after:inset-x-2 after:bottom-0 after:h-[1px] after:content-[''] group-last:after:hidden focus-visible:outline-0",onClick:()=>{n?.(),requestAnimationFrame(()=>{a.current!=null&&window.clearTimeout(a.current);const i=document.querySelector(`[data-diff-header="${o}"]`);i?.classList.remove(d.glow),i?.scrollIntoView({behavior:"instant",block:"start"}),i?.classList.add(d.glow),a.current=window.setTimeout(()=>{i?.classList.remove(d.glow)},5e3)})},"aria-label":m.formatMessage({id:"wham.diff.changedFileList.fileAriaLabel",defaultMessage:"View file {file}"},{file:o}),children:[e.jsxs("div",{className:"relative flex min-w-0 shrink pe-2",children:[e.jsx("span",{"aria-hidden":!0,className:"invisible fixed inline-block whitespace-nowrap",ref:f({axis:"width",onChange:({width:i})=>{l.current=i,s.current!=null&&r(s.current<i)}}),children:o}),e.jsx("span",{ref:f({axis:"width",onChange:({width:i})=>{s.current=i,l.current!=null&&r(i<l.current)}}),className:"inline-block max-w-full min-w-0 shrink truncate",children:o})]}),e.jsx("span",{className:"ms-auto",children:e.jsx(T,{diffFile:t,fallback:e.jsx(y,{linesAdded:t.additionLength,linesRemoved:t.deletionLength})})})]})})},p)}function ce({assistantTurn:t,onClickFile:n,startOpen:m=!1,isActive:a=!1,showFullDiff:l=!1}){const s=k(t,!0).length>0,c=F({assistantTurn:t,followUp:s&&!l}).map(r=>r.diffFile);return e.jsx(M,{diffFiles:c,onClickFile:n,startOpen:m,isActive:a})}export{M as ChangedFileList,ce as ChangedFileListFromTaskTurn};
//# sourceMappingURL=nrhnt7es7wcq9t1k.js.map
