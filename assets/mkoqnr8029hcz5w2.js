import{j as e,u as C,a as N,f as w,M as p}from"./juy90og0wtbp77qa.js";import{g8 as F,ag as v,R as h,ar as E,fL as R,dG as q,a5 as M,ke as O,hb as P,kf as B,du as I,dv as U}from"./dc2xxjkicf2pz0mj.js";import{c as Q}from"./nyxt3hy2zzj6sj8a.js";function b(){return e.jsx(F,{className:"icon-sm text-token-text-tertiary ms-1"})}function S({onChange:t,enabled:s,Icon:a,label:n,labelValues:u,description:o,onClickInfo:r,tooltip:i,tooltipValues:d,hasPadding:m=!0,className:f,disabled:c=!1,messageAfterTooltip:l=void 0}){return e.jsx(Q,{className:E("justify-start",m?"py-6":"py-0",f),children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(R,{label:"",disabled:c,enabled:s,onChange:t}),e.jsxs("p",{className:"text-md inline-flex items-center",children:[a&&e.jsx(a,{className:"icon me-1.5"}),n&&e.jsx(p,{...n,values:u}),i&&e.jsx(q,{interactive:!0,label:e.jsx(p,{...i,values:d}),side:"top",children:r?e.jsx("button",{className:"block h-full",onClick:r,children:e.jsx(b,{})}):e.jsx(b,{})}),l&&e.jsx("span",{className:"text-token-text-secondary ps-1 text-sm",children:e.jsx(p,{...l})})]})]}),o&&e.jsx("span",{className:"text-token-text-secondary ms-14 text-sm",children:e.jsx(p,{...o})})]})})}function L({workspaceId:t,Icon:s,label:a,description:n,onClickInfo:u,feature:o,value:r,tooltip:i,hasPadding:d=!0,className:m,disabled:f=!1,overrideDisplayValue:c=void 0,messageAfterTooltip:l=void 0}){const j=v(),_=C(),{variables:g,mutate:y}=N({mutationFn:({feature:x,enabled:T})=>h.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:x,value:T}}),onSettled:()=>{_.invalidateQueries({queryKey:["workspace-settings",t]})},onError:()=>{j.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_beta_feature_toggle_row"})}});return e.jsx(S,{onChange:x=>{y({feature:o,enabled:x})},enabled:c??g?.enabled??r,Icon:s,label:a,description:n,tooltip:i,hasPadding:d,className:m,disabled:f,messageAfterTooltip:l,onClickInfo:u})}function W({connectorId:t,workspaceId:s,Icon:a,label:n,tooltip:u,tooltipValues:o,messageAfterTooltip:r,description:i,labelValues:d,disabled:m}){const f=v(),c=C(),l=M(),{enabled:j,isLoading:_}=O(t,P.ADMIN_SETTING),{variables:g,mutate:y}=N({mutationFn:x=>h.safePost("/accounts/{account_id}/connectors/{connector_id}/workspace_permissions",{parameters:{path:{account_id:s,connector_id:t}},requestBody:{enabled:x}}),onSettled:()=>{c.invalidateQueries({queryKey:B(l?.normalizedAccountUserId)}),t===I[U.GITHUB_CONNECTOR]&&!g&&c.invalidateQueries({queryKey:["workspace-settings",s]})},onError:()=>{f.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_platform_connector_toggle_row"})}});return e.jsx(S,{onChange:y,enabled:g??!!j,Icon:a,label:n,labelValues:d,disabled:_||m,tooltip:u,tooltipValues:o,messageAfterTooltip:r,description:i})}const k=w({featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});export{L as B,b as S,W};
//# sourceMappingURL=mkoqnr8029hcz5w2.js.map
