import{aG as H,B as G,ar as ee,f6 as Se,gj as Ce,du as se,dv as te,e as I,ke as je,f as P,lS as l,dG as ae,R as F,a7 as L,ag as B,ac as ne,dA as ie,jh as Me,lT as we,fL as U,bk as _e,bl as J,lg as Te,hP as Z,lA as ke,C as ye,ln as Re,lU as ve,lV as Ee,j6 as Ae}from"./dc2xxjkicf2pz0mj.js";import{r as b,j as e,h as E,e as K,M as h,f as O,x as m,L as Ne,d as De,u as Y,a as Q,w as Pe,p as Ie}from"./juy90og0wtbp77qa.js";import{dl as oe,jw as Oe,a5 as j,e4 as Le,oG as W,S as A,iG as We}from"./ckp56qklot786ulr.js";import{f as X,c as re,e as le,R as Ge,i as ce,g as He,U as Fe,h as Ve,P as qe}from"./o9ylr2s640aonxdt.js";import{S as Be}from"./lgc9clnq5mfpi8wc.js";import{E as Ue}from"./d8drk78t30fy3sb4.js";import{W as Ke,B as _}from"./mkoqnr8029hcz5w2.js";import{e as y,A as Ye,a as Qe,b as Xe,d as de,c as k}from"./nyxt3hy2zzj6sj8a.js";import{W as T}from"./oue9h0fn7ryw3g04.js";import{T as ze,a as $e}from"./bq1weg8hkyprwt4p.js";import{a as Je,c as Ze,u as es,d as ss}from"./nun3xvf89dudjv6n.js";import"./icu9d2zdwlcy45kn.js";import"./btouzu0b6h5eiejj.js";import"./o6wb3ptvu0bk81yq.js";import"./dmfmxszxfbs8gsbx.js";import"./iacposgqe14fuloa.js";import"./o7zrzew6ugefv8n2.js";import"./abebcwj1m9mup3z6.js";import"./nqj34k5dky4x5suq.js";import"./hort3ndd4wla0a2j.js";import"./jsgl3b1bt1ozctr5.js";import"./ck00y48d3yzt8bq3.js";import"./hczymk9ojq2shlcf.js";import"./hisrfv493df9w8hp.js";import"./g8shiwm7jpd74xmd.js";import"./iiyyoj0wgh5vo89i.js";import"./chyo79tmbp42x8r3.js";import"./ctoge6bibgzva9ta.js";import"./m36qabefvxegdn1g.js";const ts=({workspaceId:s})=>{const{data:t}=X({workspaceId:s}),[a,n]=b.useState("");b.useEffect(()=>{const p=()=>{const g=t?.data.find(f=>ce(f));g&&n(g.id)};t?.data&&p()},[t]);const{data:i,refetch:r}=re({workspaceId:s,roleId:a??""}),{updateRole:o}=le({workspaceId:s}),c=b.useCallback(async p=>{const g=await o(p);g.id!==a&&n(g.id),r()},[a,r,o]);return e.jsx("div",{className:"mt-6",children:i?e.jsx(Ge,{role:i,onSave:c}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(H,{})})})};function as({workspaceId:s}){const t=E(),a=K(),[n,i]=b.useState(""),{data:r,isLoading:o,isPlaceholderData:c}=X({workspaceId:s}),[p,g]=b.useState(!1),f=b.useMemo(()=>r?.data.filter(S=>!S.predefined_role&&(S.name.toLowerCase().includes(n.toLowerCase())||S.description?.toLowerCase().includes(n.toLowerCase()))),[r?.data,n]),u=S=>{S&&i(""),g(S)},{createRole:R}=He({workspaceId:s,currentRoles:f});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 mb-3 flex flex-row justify-between gap-2",children:[e.jsx(oe,{inputClassName:"w-[250px] rounded-full! text-sm",value:n,onChange:S=>{i(S.target.value)},placeholder:t.formatMessage({id:"workspaceSettings.roles.search",defaultMessage:"Search role name"})}),e.jsx(G,{onClick:()=>u(!0),icon:Oe,children:e.jsx(h,{id:"workspaceSettings.roles.create",defaultMessage:"Create role"})})]}),e.jsx("div",{children:e.jsxs(j.Root,{className:"min-w-full",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[70%]"}),e.jsx("col",{className:"w-[30%]"})]}),e.jsxs(j.Header,{children:[e.jsx(j.HeaderCell,{children:e.jsx(h,{id:"workspaceSettings.roles.roleName",defaultMessage:"Role name"})}),e.jsx(j.HeaderCell,{children:e.jsx(h,{id:"workspaceSettings.roles.created",defaultMessage:"Last updated by"})}),e.jsx(j.HeaderCell,{})]}),e.jsx(j.Body,{className:ee((o||c)&&"opacity-50"),children:f==null?e.jsx(j.Row,{children:e.jsx(j.Cell,{colSpan:5,textAlign:"center",children:e.jsx(H,{})})}):f.length===0?e.jsx(j.Row,{children:e.jsx(j.Cell,{colSpan:5,textAlign:"center",children:n===""?e.jsx(h,{id:"workspaceSettings.roles.noRoles",defaultMessage:"No roles found."}):e.jsx(h,{id:"workspaceSettings.roles.noRolesWithFilter",defaultMessage:"No roles found. Try changing the search query."})})}):f.map(S=>e.jsx(ns,{role:S},S.id))})]})}),p&&e.jsx(Fe,{onClose:()=>u(!1),onSave:async S=>{const V=await R(S);a(`/admin/permissions/roles/${V.role.id}`)},isCreate:!0})]})}function ns({role:s}){const t=K();return e.jsx(e.Fragment,{children:e.jsxs(j.Row,{className:"[&>td]:py-2",onClick:()=>{t(`/admin/permissions/roles/${s.id}`)},children:[e.jsx(j.Cell,{children:e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{children:s.predefined_role?e.jsx(Le,{className:"icon"}):e.jsx(Se,{className:"icon"})}),e.jsxs("div",{children:[e.jsx("div",{children:s.name}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:s.description})]})]})}),e.jsx(j.Cell,{className:"truncate lowercase",children:s.created_by_user_obj?.email??""})]})})}function is({workspaceId:s,tooltip:t,tooltipValues:a,description:n,disabled:i}){return e.jsx(Ke,{connectorId:se[te.GITHUB_CONNECTOR],disabled:i,label:os.platformConnectorsGithub,labelValues:{badge:r=>e.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary mx-2 rounded-md px-1.5 py-0.5 text-xs",children:r})},tooltip:t,tooltipValues:a,description:n,Icon:Ce,workspaceId:s})}const os=O({platformConnectorsGithub:{id:"workspaceSettings.platformConnectorsGithub",defaultMessage:"GitHub <badge>Beta</badge>"}});function rs(s){return!!s&&typeof s=="object"&&"id"in s}function ls({title:s,description:t,children:a,upsellEnterprise:n=!1,isQuorum:i=!1,descriptionValues:r={}}){return e.jsx(ae,{label:e.jsx(h,{...N.enterpriseRequiredMessage}),side:"top",disabled:!n,triggerAs:null,children:e.jsxs(Ye,{className:ee(n&&"text-token-text-tertiary"),children:[e.jsxs(Qe,{className:"flex items-center gap-3",children:[e.jsx(h,{...s}),n&&e.jsx("span",{className:"bg-token-bg-tertiary rounded-xl px-2 pb-0.5 text-sm",children:e.jsx(h,{...N.enterpriseUpsellPill})}),i&&e.jsx("span",{className:"bg-token-bg-tertiary rounded-xl px-2 pb-0.5 text-sm font-normal",children:e.jsx(h,{...N.thisFeatureDisabledForOrg})})]}),t&&e.jsx(Xe,{className:"text-token-text-secondary py-2",children:rs(t)?e.jsx(h,{...t,values:r}):t}),a]})})}const cs=({upsellEnterprise:s,isQuorum:t,whamAccess:a,codexAgentNetworkAccess:n,workspaceId:i})=>{const r=I(),{enabled:o,isLoading:c}=je(se[te.GITHUB_CONNECTOR]),p=P(r,"3507761600");return e.jsx(ls,{title:m({id:"d4cT9L",defaultMessage:"Codex"}),description:m({id:"ffT+eO",defaultMessage:"Manage whether members can use Codex."}),upsellEnterprise:s,isQuorum:t,children:e.jsxs(y,{children:[e.jsx(is,{disabled:!0,workspaceId:i,description:N.codexGitHubToggleLinkToConnectorSettings}),e.jsx(_,{disabled:s||t||c||!a&&!o,label:m({id:"qfXuT1",defaultMessage:"Allow members to use Codex"}),tooltip:a&&!o&&!c?N.codexMustEnableGitHub:void 0,feature:l.ALLOW_CODEX_ACCESS,value:a,workspaceId:i}),a&&p&&e.jsx(_,{disabled:s||t||c||!a&&!o,label:N.agentInternetAccess,description:N.agentInternetAccessDescription,feature:l.CODEX_AGENT_NETWORK_ACCESS,value:n,workspaceId:i})]})})},N=O({enterpriseUpsellPill:{id:"workspaceSettings.enterpriseUpsellPill",defaultMessage:"Enterprise"},enterpriseRequiredMessage:{id:"workspaceSettings.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},thisFeatureDisabledForOrg:{id:"workspaceSettings.thisFeatureDisabledForOrg",defaultMessage:"This feature is disabled in HIPAA compliant workspaces"},codexGitHubToggleLinkToConnectorSettings:{id:"workspaceSettings.codex.githubConnectorSettings",defaultMessage:"Codex requires the GitHub connector.{br}You can enable or disable it in <settingsLink>Connector Settings</settingsLink>",values:{br:e.jsx("br",{}),settingsLink:s=>e.jsx(Ne,{to:"/admin/ca",className:"underline",children:s})}},codexMustEnableGitHub:{id:"workspaceSettings.codex.mustEnableGitHub",defaultMessage:"You must enable the GitHub connector in connector settings for Codex to work."},agentInternetAccess:{id:"workspaceSettings.agentInternetAccess",defaultMessage:"Allow Codex agent to access the internet"},agentInternetAccessDescription:{id:"workspaceSettings.agentInternetAccessDescription",defaultMessage:"Allows environments to be created with agent internet access enabled"}});function ds(s){return De({queryKey:["workspace-system-instruction",s],queryFn:s?()=>F.safeGet("/accounts/{account_id}/system_instruction",{parameters:{path:{account_id:s}}}):Pe})}function us(s){const t=Y();return Q({mutationFn:a=>F.safePost("/accounts/{account_id}/system_instruction",{parameters:{path:{account_id:s}},requestBody:{system_instruction:a}}),onSuccess:()=>{t.invalidateQueries({queryKey:["workspace-system-instruction",s]})}})}function gs(){const s=L();return s?.data.computeResidency!==""&&s?.data.computeResidency!=="no_constraint"}const z=({workspaceId:s})=>{const t=B(),a=Y(),n=E();return Q({mutationFn:({feature:i,enabled:r})=>F.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:s}},requestBody:{feature:i,value:r}}),onSettled:()=>{a.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{t.danger(n.formatMessage(ue.featureSettingsUpdateFailed,{toastId:"workspace_settings"}))}})},ps=({workspaceId:s})=>{const t=B(),a=Y(),n=E();return Q({mutationFn:({setting:i,value:r})=>F.safePost("/accounts/{account_id}/settings/share_settings",{parameters:{path:{account_id:s}},requestBody:{setting:i,value:r}}),onSettled:()=>{a.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{t.danger(n.formatMessage(ue.featureSettingsUpdateFailed,{toastId:"share_settings_row"}))}})},ue=O({featureSettingsUpdateFailed:{id:"workspaceSettings.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});function ms({workspaceId:s}){const{data:t,isLoading:a}=ne(s),n=I(),i=L(),r=!i?.isEnterprisey(),o=ie(n),c=i?.residencyRegion==="no_constraint"&&!o,p=P(n,"417039829"),g=i?.isEnterprisey(),f=P(n,"2509278897");if(a)return e.jsx(H,{});if(!t)return null;const u={workspaceId:s,data:t,upsellEnterprise:r,shouldDisableForQuorum:o};return e.jsxs(de,{children:[e.jsx(ge,{...u}),e.jsx(hs,{...u}),e.jsx(fs,{...u}),t.beta_settings.canvas&&e.jsx(bs,{...u}),e.jsx(xs,{...u}),e.jsx(Ss,{...u}),g&&e.jsx(cs,{upsellEnterprise:r,isQuorum:o,whamAccess:t.beta_settings.wham_access,codexAgentNetworkAccess:t.beta_settings.codex_agent_network_access,workspaceId:s}),p&&e.jsx(Cs,{...u}),e.jsx(js,{...u}),e.jsx(_s,{...u}),f&&c&&e.jsx(Ts,{...u})]})}const ge=({workspaceId:s})=>{const t=E(),a=B(),n=Me(),i=gs(),r=L(),o=r&&r.features.includes(we),{data:c}=ds(s),[p,g]=b.useState("");b.useEffect(()=>{c&&o&&g(c.system_instruction)},[c,o]);const f=us(s);return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:d.workspaceDetails,children:e.jsxs(y,{children:[e.jsxs(k,{children:[e.jsx(h,{id:"SgdcRQ",defaultMessage:"Organization ID"}),e.jsx(W,{value:r?.data.organizationId??"",onCopied:()=>a.success(t.formatMessage({id:"Ctw3o0",defaultMessage:"Copied organization ID"}))})]}),e.jsxs(k,{children:[e.jsx(h,{id:"yFldxx",defaultMessage:"Workspace ID"}),e.jsx(W,{value:s,onCopied:()=>a.success(t.formatMessage({id:"CqDpiM",defaultMessage:"Copied workspace ID"}))})]}),n&&e.jsxs(k,{children:[e.jsx(h,{id:"ql2W8E",defaultMessage:"Data Residency Region"}),e.jsx(W,{value:r?.data.residencyRegion??"",onCopied:()=>a.success(t.formatMessage({id:"gL43UM",defaultMessage:"Copied data residency"}))})]}),i&&e.jsxs(k,{children:[e.jsx(h,{id:"0l7rYd",defaultMessage:"Inference Residency Region"}),e.jsx(W,{value:r?.data.computeResidency??"",onCopied:()=>a.success(t.formatMessage({id:"DbwXiz",defaultMessage:"Copied inference residency"}))})]})]})}),o&&e.jsx(T,{title:d.workspaceInstructionSection,upsellEnterprise:!1,description:d.systemInstructionDescription,children:e.jsxs(k,{className:"flex-col gap-2",children:[e.jsx(Ue,{className:"border-token-border-default focus-within:border-token-border-heavy focus-within:ring-token-text-secondary bg-token-bg-primary w-full resize-y rounded-md border px-3 py-2 font-mono text-xs shadow-none focus-within:ring-1",value:p,placeholder:"How should ChatGPT behave? What traits should it have? What should it know about your company?",onChange:u=>g(u.target.value),rows:5}),e.jsx("div",{className:"flex justify-end",children:e.jsx(G,{size:"small",onClick:()=>f.mutate(p),disabled:f.isPending||p===c?.system_instruction,children:e.jsx(h,{...d.workspaceInstructionSave})})})]})})]})},hs=({workspaceId:s,data:t,upsellEnterprise:a,shouldDisableForQuorum:n})=>{const i=I(),r=P(i,"773249106"),o=a||n;return e.jsx(T,{title:d.sharingSettingsTitle,upsellEnterprise:a,shouldDisableForQuorum:n,children:e.jsx(y,{children:e.jsxs(k,{children:[e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(h,{...r?d.chatCanvasProjectSharingTitle:d.chatCanvasSharingTitle})}),e.jsx(me,{workspaceId:s,disabled:o,defaultValue:t.share_settings.chat_share_setting})]})})})},fs=({workspaceId:s,shouldDisableForQuorum:t,upsellEnterprise:a,data:n})=>{const[i,r]=b.useState(!1),{variables:o,mutate:c}=z({workspaceId:s}),p=a||t;return e.jsxs(e.Fragment,{children:[i&&e.jsx(he,{onConfirm:()=>{c({feature:l.MEMORY,enabled:!1}),r(!1)},onClose:()=>{r(!1)}}),e.jsx(T,{title:d.memoryFeatureSettingsTitle,description:d.workspaceMemoryDescription,descriptionValues:{link:g=>e.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-in-chatgpt-faq",target:"_blank",className:"underline",rel:"noreferrer",children:g})},upsellEnterprise:a,shouldDisableForQuorum:t,children:e.jsx(y,{children:e.jsxs(k,{className:"justify-start py-6",children:[e.jsx(U,{label:"",disabled:p,enabled:o?.enabled??n.beta_settings.sunshine,onChange:g=>{g?c({feature:l.MEMORY,enabled:g}):r(!0)}}),e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(h,{...d.memoryOptionTitle})})]})})})]})},bs=({upsellEnterprise:s,data:t,workspaceId:a})=>e.jsx(T,{title:m({id:"SyabKs",defaultMessage:"Canvas"}),description:m({id:"pPFCur",defaultMessage:"Control how users in this workspace can use the ChatGPT canvas feature."}),upsellEnterprise:s,shouldDisableForQuorum:!1,children:e.jsxs(y,{children:[e.jsx(_,{disabled:s,label:m({id:"wlG5ZH",defaultMessage:"Canvas code execution"}),feature:l.CANVAS_CODE_EXECUTION,tooltip:m({id:"qMiLv3",defaultMessage:"Support for running canvas code within the browser."}),value:t.beta_settings.canvas_code_execution,workspaceId:a}),e.jsx(_,{disabled:s,label:m({id:"XwHFHi",defaultMessage:"Allow canvas code to access the network"}),feature:l.CANVAS_CODE_NETWORK_ACCESS,tooltip:m({id:"ujHQEU",defaultMessage:"Learn more about network requests in canvas"}),onClickInfo:()=>window.open("https://help.openai.com/en/articles/9930697-what-is-the-canvas-feature-in-chatgpt-and-how-do-i-use-it#h_cd52fdbc16"),value:t.beta_settings.canvas_code_network_access,workspaceId:a})]})}),xs=({upsellEnterprise:s,shouldDisableForQuorum:t,data:a,workspaceId:n})=>{const i=s,r=_e(),o=r?.includes(J.SearchTool)&&!r.includes(J.SearchToolHoldout),c=I(),p=P(c,"3940160259");let g=d.deepResearchTooltipDisabled;return t?g=d.deepResearchTooltipDisabledQuorum:a.beta_settings.browsing&&(g=d.deepResearchTooltip),e.jsx(T,{title:d.searchTitle,description:d.searchDescription,descriptionValues:{link:f=>e.jsx("a",{href:"https://help.openai.com/en/articles/10093903-chatgpt-search-for-enterprise-and-edu",target:"_blank",className:"underline",rel:"noreferrer",children:f})},upsellEnterprise:s,shouldDisableForQuorum:!1,children:e.jsxs(y,{children:[e.jsx(_,{label:o?d.searchOptionTitle:d.browseOptionTitle,feature:l.BROWSING,value:a.beta_settings.browsing,workspaceId:n,tooltip:o?d.searchTooltip:d.browseTooltip,disabled:i}),p===!0&&e.jsx(_,{label:d.deepResearchTitle,feature:l.DEEP_RESEARCH,messageAfterTooltip:g,value:a.beta_settings.deep_research,workspaceId:n,tooltip:g,disabled:s||!a.beta_settings.browsing||t,onClickInfo:()=>window.open("https://help.openai.com/en/articles/10500283-deep-research-faq")})]})})},Ss=({upsellEnterprise:s,data:t,workspaceId:a})=>{const n=s;return e.jsx(T,{title:m({id:"/1YXN0",defaultMessage:"Voice"}),description:m({id:"3jvok6",defaultMessage:"Manage whether members can share their screen or video while having a voice conversation. <link>Learn more</link>"}),descriptionValues:{link:i=>e.jsx("a",{href:"https://help.openai.com/en/articles/8400625-voice-mode-faq",target:"_blank",className:"underline",rel:"noreferrer",children:i})},upsellEnterprise:s,shouldDisableForQuorum:!1,children:e.jsx(y,{children:e.jsx(_,{disabled:n,label:m({id:"9usJzG",defaultMessage:"Allow members to share their screen or video while using voice mode"}),feature:l.VIDEO_SCREEN_SHARING,value:t.beta_settings.video_screen_sharing,workspaceId:a})})})},Cs=({shouldDisableForQuorum:s,data:t,workspaceId:a})=>{const n=Te();return e.jsx(T,{title:m({id:"aVKeFK",defaultMessage:"Record"}),description:m({id:"l0y0CK",defaultMessage:"Manage whether users can use ChatGPT to record, transcribe, and summarize longform audio. Recordings will be used solely for transcription purposes and will not be stored by OpenAI. <link>Learn more</link>"}),descriptionValues:{link:i=>e.jsx("a",{href:"https://help.openai.com/en/articles/11487532",target:"_blank",className:"underline",rel:"noreferrer",children:i})},shouldDisableForQuorum:s,children:e.jsxs(y,{children:[e.jsx(_,{label:m({id:"03rxwg",defaultMessage:"Allow members to use ChatGPT Record"}),feature:l.HIVE,value:t.beta_settings.hive,workspaceId:a,disabled:s}),e.jsx(_,{label:m({id:"ooMyTF",defaultMessage:"Allow ChatGPT to reference past notes and transcripts"}),tooltip:n?m({id:"CuaZot",defaultMessage:"ChatGPT can reference a user's own past notes and transcripts from record, to help provide more context across chats."}):d.unsupportedDrTooltip,feature:l.HIVE_KNOWLEDGE_RETRIEVAL,value:t.beta_settings.hive_knowledge_retrieval,workspaceId:a,disabled:s||!n})]})})},js=({upsellEnterprise:s,shouldDisableForQuorum:t,data:a,workspaceId:n})=>{const i=s||t;return e.jsx(T,{title:m({id:"wgrfi/",defaultMessage:"Work with Apps"}),description:d.workspaceAppPairingDescription,descriptionValues:{link:r=>e.jsx("a",{href:"https://help.openai.com/en/articles/10119604",target:"_blank",className:"underline",rel:"noreferrer",children:r})},upsellEnterprise:s,shouldDisableForQuorum:t,children:e.jsx(y,{children:e.jsx(_,{disabled:i,label:m({id:"j8pJeQ",defaultMessage:"Work with Apps"}),feature:l.APP_PAIRING,value:a.beta_settings.app_pairing,workspaceId:n})})})},$=60*60*24,Ms=$*90,ws=$*365,_s=({upsellEnterprise:s,data:t})=>e.jsx(T,{title:d.retentionPolicyTitle,description:d.retentionChange,upsellEnterprise:s,children:e.jsxs(k,{children:[e.jsx("p",{className:"inline-flex items-center text-base",children:e.jsx(h,{...d.conversationRetention})}),e.jsx(pe,{data:t})]})}),pe=({data:s})=>{const t=E(),a=s.conversation_ttl??null;let n;return a==null?n=t.formatMessage(d.retentionInfinite):a===Ms?n=t.formatMessage(d.retentionNinetyDays):a===ws?n=t.formatMessage(d.retentionOneYear):n=t.formatMessage(d.retentionCustomDays,{num:Math.floor(a/$)}),e.jsx(ae,{label:t.formatMessage(d.retentionSettingTooltip),children:n})},Ts=({upsellEnterprise:s,shouldDisableForQuorum:t,data:a,workspaceId:n})=>{const i=E(),r=L(),o=I(),c=P(o,"614413305")&&r?.residencyRegion==="no_constraint";return e.jsx(T,{title:d.appleIntelligenceTitle,upsellEnterprise:s,shouldDisableForQuorum:t,description:i.formatMessage(d.appleIntelligenceDescription),children:e.jsxs(k,{className:"flex-col",children:[e.jsx(_,{hasPadding:!1,disabled:!1,label:m({id:"mcLjLe",defaultMessage:"Beta: Apple Intelligence"}),Icon:Be,feature:l.CLIENT_APPLICATION_APPLE,value:a.beta_settings.client_application_apple,workspaceId:n,tooltip:m({id:"mp2Kmk",defaultMessage:"Beta: Enable linking with Apple Intelligence"})}),c&&e.jsx(_,{className:"ms-6",hasPadding:!1,disabled:!a.beta_settings.client_application_apple,label:m({id:"64jjqZ",defaultMessage:"Enable on managed devices only"}),feature:l.CLIENT_APPLICATION_APPLE_MDM_REQUIRED,value:a.beta_settings.client_application_apple_mdm_required,workspaceId:n,tooltip:m({id:"7Afc2K",defaultMessage:"Only allow linking this workspace with Apple Intelligence on MDM managed devices"})})]})})};function me({workspaceId:s,defaultValue:t,disabled:a=!1}){const{variables:n,mutate:i}=ps({workspaceId:s}),r=[{display:d.workspaceMembersOnlySelect,value:Z.WORKSPACE_ONLY},{display:d.noOneSelect,value:Z.NO_ONE}],o=ke.CHAT_SHARE_SETTINGS;return e.jsxs(A.Root,{defaultValue:n?.value??t,onValueChange:c=>{i({setting:o,value:c})},disabled:a,children:[e.jsxs(A.Trigger,{className:"text-md focus-visible:border-none",children:[e.jsx(A.Value,{}),e.jsx(A.Icon,{})]}),e.jsx(A.Portal,{children:e.jsx(A.Content,{children:r.map((c,p)=>e.jsx(A.Item,{className:"text-md",value:c.value,children:e.jsx(h,{...c.display})},p))})})]})}function he({onConfirm:s,onClose:t}){const a=E();return e.jsx(ye,{testId:"modal-disable-workspace-memory",type:"warning",isOpen:!0,onClose:t,title:a.formatMessage(d.deleteWorkspaceMemoryModalTitle),showCloseButton:!0,primaryButton:e.jsx(G,{color:"danger",onClick:s,children:e.jsx(h,{...d.deleteWorkspaceMemoryModalConfirm})}),secondaryButton:e.jsx(G,{onClick:t,color:"secondary",children:e.jsx(h,{...d.deleteWorkspaceMemoryModalCancel})}),children:e.jsx("div",{className:"text-token-text-primary mb-2 text-sm",children:e.jsx(h,{...d.deleteWorkspaceMemoryModalInfo,values:{b:n=>e.jsx("b",{children:n})}})})})}const d=O({appleIntelligenceTitle:{id:"workspaceSettings.appleIntelligenceTitle",defaultMessage:"Apple Intelligence"},appleIntelligenceDescription:{id:"workspaceSettings.appleIntelligenceDescription",defaultMessage:"Manage whether members can link with Apple Intelligence."},retentionPolicyTitle:{id:"workspaceSettings.retentionPolicyTitle",defaultMessage:"Retention policy"},sharingSettingsTitle:{id:"workspaceSettings.sharingSettingsTitle",defaultMessage:"Sharing"},memoryFeatureSettingsTitle:{id:"workspaceSettings.memoryFeatureSettingsTitle",defaultMessage:"Memory"},memoryOptionTitle:{id:"workspaceSettings.memoryOptionTitle",defaultMessage:"Allow members to use memory"},deepResearchTitle:{id:"workspaceSettings.deepResearchTitle",defaultMessage:"Deep Research"},workspaceMemoryDescription:{id:"workspaceSettings.workspaceMemoryDescription",defaultMessage:"Manage whether members can enable memory. This allows ChatGPT to become more helpful by remembering details and preferences across chats. <link>Learn more</link>"},workspaceAppPairingDescription:{id:"workspaceSettings.workspaceAppPairingDescription",defaultMessage:"Control whether users in this workspace can enable ChatGPT to work with apps. This allows ChatGPT to read and edit the content of specific apps on their desktop to provide better responses. <link>Learn more</link>"},deleteWorkspaceMemoryModalTitle:{id:"workspaceSettings.deleteWorkspaceMemoryModalTitle",defaultMessage:"Are you sure?"},deleteWorkspaceMemoryModalConfirm:{id:"workspaceSettings.deleteWorkspaceMemoryModalConfirm",defaultMessage:"Disable and delete memories"},deleteWorkspaceMemoryModalCancel:{id:"workspaceSettings.deleteWorkspaceMemoryModalCancel",defaultMessage:"Cancel"},deleteWorkspaceMemoryModalInfo:{id:"workspaceSettings.groups.deleteWorkspaceMemoryModalInfo",defaultMessage:"If you disable memory for your workspace, <b>members' existing memories will be forgotten</b>. This can't be undone."},chatCanvasSharingTitle:{id:"workspaceSettings.chatCanvasSharingTitle",defaultMessage:"Allow members to share a chat or canvas with..."},chatCanvasProjectSharingTitle:{id:"workspaceSettings.chatCanvasProjectSharingTitle",defaultMessage:"Allow members to share a chat, canvas, or project with..."},workspaceDetails:{id:"workspaceSettings.workspaceDetails",defaultMessage:"Workspace details"},workspaceMembersOnlySelect:{id:"workspaceSettings.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},noOneSelect:{id:"workspaceSettings.noOneSelect",defaultMessage:"No one"},conversationRetention:{id:"workspaceSettings.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettings.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettings.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettings.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettings.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettings.retentionChange",defaultMessage:"Contact your account manager to change this setting."},retentionSettingTooltip:{id:"workspaceSettings.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},connectionsTitle:{id:"workspaceSettings.connectionsTitle",defaultMessage:"Connectors"},contextConnectorsSubtitle:{id:"workspaceSettings.contextConnectorsSubtitle",defaultMessage:"Manage which apps users in this workspace can connect to directly from ChatGPT. For more information, refer to the {helpCenterLink}."},contextConnectorsHelpCenterLink:{id:"workspaceSettings.contextConnectorsHelpCenterLink",defaultMessage:"Help Center"},contextConnectorsGoogleDrive:{id:"workspaceSettings.contextConnectorsGoogleDrive",defaultMessage:"Google Drive"},contextConnectorsO365PersonalTooltip:{id:"workspaceSettings.contextConnectorsO365PersonalTooltip",defaultMessage:"This includes personal OneDrive accounts but not OneDrive for Business or SharePoint accounts."},contextConnectorsO365BusinessTooltip:{id:"workspaceSettings.contextConnectorsO365BusinessTooltip",defaultMessage:"This includes OneDrive for Business and SharePoint accounts but not personal accounts."},platformConnectorsGithubTooltip:{id:"workspaceSettings.platformConnectorsGithubTooltip",defaultMessage:"Controls access to GitHub across ChatGPT"},searchTitle:{id:"workspaceSettings.searchTitle",defaultMessage:"Web Search"},searchDescription:{id:"workspaceSettings.workspaceGPTsDescription",defaultMessage:"Manage whether ChatGPT and GPTs created in this workspace can browse the internet. When enabled, it may send search queries and general location information to Bing, but this data is not linked to or associated with user accounts. This does not apply to third-party GPTs. <link>Learn more</link>"},deepResearchDescription:{id:"workspaceSettings.workspaceDeepResearchDescription",defaultMessage:"Deep Research utilizes web search & reasoning to respond to research queries. <link>Learn more</link>"},searchTooltip:{id:"workspaceSettings.searchTooltip",defaultMessage:"Web search allows ChatGPT and GPTs to answer questions on recent topics."},searchOptionTitle:{id:"workspaceSettings.searchOptionTitle",defaultMessage:"Web Search"},browseOptionTitle:{id:"workspaceSettings.browseOptionTitle",defaultMessage:"Browsing with Bing"},browseTooltip:{id:"workspaceSettings.browseTooltip",defaultMessage:"Allow ChatGPT and GPTs to browse the internet to answer questions about recent topics and events."},deepResearchTooltip:{id:"workspaceSettings.deepResearchTooltip",defaultMessage:"Deep research uses web search and reasoning to handle complex research requests."},deepResearchTooltipDisabled:{id:"workspaceSettings.deepResearchTooltipDisabled",defaultMessage:"Deep research uses web search and reasoning to handle complex research requests. Turn web search on to allow deep research."},deepResearchTooltipDisabledQuorum:{id:"workspaceSettings.deepResearchTooltipDisabledQuorum",defaultMessage:"This feature is disabled in HIPAA compliant workspaces"},deepResearchTooltipDisabledWarning:{id:"workspaceSettings.deepResearchTooltipDisabledWarning",defaultMessage:"Requires web search"},unsupportedDrTooltip:{id:"workspaceSettings.unsupportedDrTooltip",defaultMessage:"This feature is currently not available in your data residency region."},workspaceInstructionSection:{id:"workspaceSettings.workspaceInstructionSection",defaultMessage:"Workspace Instructions"},workspaceInstructionSave:{id:"workspaceSettings.workspaceInstructionSave",defaultMessage:"Save"},systemInstructionDescription:{id:"workspaceSettings.workspaceInstruction",defaultMessage:"Add anything you'd like ChatGPT to consider in its response. These instructions will be added to every new conversation for users in your workspace going forward"},lockedSettingTooltip:{id:"workspaceSettings.lockedSettingTooltip",defaultMessage:"This setting is locked for your workspace"}}),ks=({workspaceId:s})=>{const{data:t,isLoading:a}=X({workspaceId:s}),[n,i]=b.useState("");b.useEffect(()=>{const f=()=>{const u=t?.data.find(R=>ce(R));u&&i(u.id)};t?.data&&f()},[t]);const{data:r,refetch:o,isLoading:c}=re({workspaceId:s,roleId:n??""}),{updateRole:p}=le({workspaceId:s}),g=b.useCallback(async f=>{const u=await p(f);u.id!==n&&i(u.id),o()},[n,o,p]);return{defaultRole:r,handleSaveRole:g,isLoading:a||c}};function ys({workspaceId:s}){const t=I(),a=E(),{data:n,isLoading:i}=ne(s),r=L(),o=!r?.isEnterprisey(),c=ie(t),p=Ve(),{defaultRole:g,handleSaveRole:f,isLoading:u}=ks({workspaceId:s}),[R,S]=b.useState(""),{filteredSections:V,totalPermissionsCount:fe}=b.useMemo(()=>{const C=Re({isCanvasEnabled:n?.beta_settings.canvas??!1,isEnterprisey:r?.isEnterprisey()??!1,...p}),x=C.flatMap(v=>v.entries).length,q=C.map(v=>({...v,entries:v.entries.filter(M=>{const be=typeof M.title=="string"?M.title:a.formatMessage(M.title),xe=M.description?typeof M.description=="string"?M.description:a.formatMessage(M.description,M.descriptionValues):"";return[be,xe].join(" ").toLowerCase().includes(R.toLowerCase())||M.rbac&&M.permissionName.toLowerCase().includes(R.toLowerCase())||!M.rbac&&M.settingName.toLowerCase().includes(R.toLowerCase())})})).filter(v=>v.entries.length>0);return{permissionsBySection:C,totalPermissionsCount:x,filteredSections:q}},[r,n?.beta_settings.canvas,p,a,R]);return i||u?e.jsx(H,{}):!n||!g?null:e.jsxs(de,{children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:a.formatMessage(Es.defaultSettingDescription)}),e.jsx("div",{className:"flex flex-row items-center justify-between",children:e.jsx(oe,{inputClassName:"w-[250px] rounded-full! text-sm",value:R,onChange:C=>{S(C.target.value)},placeholder:a.formatMessage({id:"hRuTvi",defaultMessage:"Search {count} permissions"},{count:fe})})}),e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsx(ge,{workspaceId:s}),V.map(C=>e.jsx(T,{title:C.title,description:C.description,descriptionValues:C.descriptionValues,upsellEnterprise:o&&!C.availableForEnterprise,shouldDisableForQuorum:c&&!C.availableForQuorum,children:e.jsx(y,{children:C.entries.map(x=>{const q=x.rbac?x.permissionName:x.settingName,v=typeof x.title=="string"?x.title:a.formatMessage(x.title);return e.jsx(k,{children:e.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-md",children:v}),x.description&&e.jsx("span",{className:"text-token-text-tertiary text-xs",children:typeof x.description=="string"?x.description:a.formatMessage(x.description,x.descriptionValues)})]}),x.rbac?e.jsx(qe,{ariaLabel:v,role:g,permissionName:x.permissionName,handleSaveRole:f,disabled:x.disabled||o||c}):e.jsx(Rs,{entry:x,workspaceId:s,data:n,upsellEnterprise:o,shouldDisableForQuorum:c})]})},q)})})},String(C.title.defaultMessage)))]})]})}const Rs=({entry:s,workspaceId:t,data:a,upsellEnterprise:n,shouldDisableForQuorum:i})=>b.useMemo(()=>{const o=n||i;switch(s.settingName){case"share_chat":return e.jsx(me,{workspaceId:t,disabled:o,defaultValue:a.share_settings.chat_share_setting});case"rentention_policy":return e.jsx(pe,{data:a});case"memory_access":return e.jsx(vs,{data:a,workspaceId:t,disabled:o});case"apps_access":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.APP_PAIRING],feature:l.APP_PAIRING,disabled:o});case"apple_intelligence_access":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.CLIENT_APPLICATION_APPLE],feature:l.CLIENT_APPLICATION_APPLE,disabled:o});case"apple_intelligence_mdm_access":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.CLIENT_APPLICATION_APPLE_MDM_REQUIRED],feature:l.CLIENT_APPLICATION_APPLE_MDM_REQUIRED,disabled:o});case"canvas_code_execution":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.CANVAS_CODE_EXECUTION],feature:l.CANVAS_CODE_EXECUTION,disabled:o});case"canvas_code_network_access":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.CANVAS_CODE_NETWORK_ACCESS],feature:l.CANVAS_CODE_NETWORK_ACCESS,disabled:o});case"web_search":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.BROWSING],feature:l.BROWSING,disabled:o});case"deep_research":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.DEEP_RESEARCH],feature:l.DEEP_RESEARCH,disabled:o});case"video_screen_sharing":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.VIDEO_SCREEN_SHARING],feature:l.VIDEO_SCREEN_SHARING,disabled:o});case"codex_access":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.ALLOW_CODEX_ACCESS],feature:l.ALLOW_CODEX_ACCESS,disabled:o});case"codex_agent_network":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.CODEX_AGENT_NETWORK_ACCESS],feature:l.CODEX_AGENT_NETWORK_ACCESS,disabled:o});case"record_access":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.HIVE],feature:l.HIVE,disabled:i});case"record_reference_past_transcripts":return e.jsx(w,{workspaceId:t,enabled:a.beta_settings[l.HIVE_KNOWLEDGE_RETRIEVAL],feature:l.HIVE_KNOWLEDGE_RETRIEVAL,disabled:i})}},[a,s.settingName,i,n,t]),vs=({workspaceId:s,data:t,disabled:a})=>{const{variables:n,mutate:i}=z({workspaceId:s}),[r,o]=b.useState(!1);return e.jsxs(e.Fragment,{children:[r&&e.jsx(he,{onConfirm:()=>{i({feature:l.MEMORY,enabled:!1}),o(!1)},onClose:()=>{o(!1)}}),e.jsx(U,{label:"",disabled:a,enabled:n?.enabled??t.beta_settings[l.MEMORY],onChange:c=>{c?i({feature:l.MEMORY,enabled:c}):o(!0)}})]})},w=({workspaceId:s,disabled:t,enabled:a,feature:n})=>{const{variables:i,mutate:r}=z({workspaceId:s});return e.jsx(U,{label:"",disabled:t,enabled:i?.enabled??a,onChange:o=>{r({feature:n,enabled:o})}})},Es=O({defaultSettingDescription:{id:"1IUdGa",defaultMessage:"This page controls the default experience for members who don't have a custom role."}}),As=s=>s==="general"||s==="permissions"||s==="roles";function Ns({currentWorkspaceId:s}){const t=E(),a=ve(),n=Ee(),i=b.useMemo(()=>{const u=[{key:"general",label:t.formatMessage(D.generalTab),children:n?e.jsx(ys,{workspaceId:s}):e.jsx(ms,{workspaceId:s})}];return a&&(n||u.push({key:"permissions",label:t.formatMessage(D.workspacePermissionsTab),children:e.jsx(ts,{workspaceId:s})}),u.push({key:"roles",label:t.formatMessage(D.customRolesTab),children:e.jsx(as,{workspaceId:s})})),u},[s,t,n,a]),r=K(),[o]=Ie(),c=o.get("tab"),[p,g]=b.useState(c&&As(c)?c:i[0].key),f=u=>{g(u),r({pathname:window.location.pathname,search:new URLSearchParams({tab:u}).toString()})};return e.jsxs(e.Fragment,{children:[e.jsx(We,{children:e.jsx("title",{children:t.formatMessage(D.title)})}),e.jsx(Je,{title:t.formatMessage(D.title),subtitle:t.formatMessage(D.subtitle),tabsHeader:e.jsx(ze,{items:i,activeTab:p,onTabChange:f})}),e.jsx(Ze,{children:e.jsx($e,{items:i,activeTab:p})})]})}const D=O({title:{id:"842i2c",defaultMessage:"Settings & permissions"},subtitle:{id:"s0ozLO",defaultMessage:"Configure baseline permissions for your workspace and tailor access with custom roles."},generalTab:{id:"bNJn8S",defaultMessage:"Workspace"},workspacePermissionsTab:{id:"9EpK0x",defaultMessage:"Workspace permissions"},customRolesTab:{id:"0SIrmV",defaultMessage:"Custom roles"}}),lt=Ae(function(){const t=es();return ss(),e.jsx(Ns,{...t})});export{lt as default};
//# sourceMappingURL=z5el6g9weleomcle.js.map
