import{ag as S,C as y,by as p,ar as _,kg as C,a7 as A,e as O,f as x,aG as W,dG as v,B as u,fs as B,j6 as R}from"./dc2xxjkicf2pz0mj.js";import{h as M,u as F,e as j,a as T,j as e,M as s,P as L,ah as I,r as V,ak as $}from"./juy90og0wtbp77qa.js";import{W as G,i1 as U,i as X,bU as q,b$ as z,bV as Y,e as Q,cX as Z,a2 as H}from"./ckp56qklot786ulr.js";import{R as J,I as w,S as K}from"./dmc9t6rhwrqiprl2.js";import{u as ee}from"./g1nyehepirv7u2n9.js";import{E as te}from"./jtc7ne2a6scrj9t5.js";import{P as ae,a as se}from"./lptwpbjabrvjmhsj.js";import{W as ne}from"./fwb02vgq072qdb93.js";import"./hibpneehm1q4hc2e.js";import"./iacposgqe14fuloa.js";import"./o6wb3ptvu0bk81yq.js";import"./dmfmxszxfbs8gsbx.js";import"./o7zrzew6ugefv8n2.js";import"./abebcwj1m9mup3z6.js";import"./nqj34k5dky4x5suq.js";import"./hort3ndd4wla0a2j.js";import"./jsgl3b1bt1ozctr5.js";import"./ck00y48d3yzt8bq3.js";import"./hczymk9ojq2shlcf.js";import"./dta0gs41e2vxh1q9.js";import"./g8shiwm7jpd74xmd.js";import"./btouzu0b6h5eiejj.js";import"./hisrfv493df9w8hp.js";import"./iiyyoj0wgh5vo89i.js";import"./mwysfro98kbgaaol.js";import"./o46eutw3gegbydjq.js";import"./jbze7lwlszm657iq.js";import"./h0zoartyn6ddtvom.js";function ie({environmentId:n,onClose:t}){const o=M(),m=S(),r=F(),c=j(),{mutate:a,isPending:g}=T({mutationFn:()=>G.deleteEnvironment(n),onSuccess:async()=>{U(r,n),await X(r,n),m.success(o.formatMessage({id:"wham.deleteEnvironmentModal.environmentDeletedSuccessfully",defaultMessage:"Environment deleted successfully"})),t(),c("/codex/settings/environments")},onError:()=>{m.danger(o.formatMessage({id:"wham.deleteEnvironmentModal.failedToDeleteEnvironment",defaultMessage:"Failed to delete environment"}))}});return e.jsx(y,{testId:"modal-wham-delete-environment",isOpen:!0,type:"danger",title:e.jsx(s,{id:"wham.deleteEnvironmentModal.title",defaultMessage:"Delete environment"}),onClose:t,primaryButton:e.jsx(p.Button,{title:o.formatMessage({id:"wham.deleteEnvironmentModal.delete",defaultMessage:"Delete"}),color:"danger",loading:g,onClick:()=>{a()}}),secondaryButton:e.jsx(p.Button,{title:o.formatMessage({id:"wham.deleteEnvironmentModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:t}),children:e.jsx("div",{className:"text-sm",children:e.jsx(s,{id:"wham.deleteEnvironmentModal.message",defaultMessage:"Tasks that use it will remain, but users wonâ€™t be able to create follow-up tasks."})})})}function i({label:n,children:t,className:o}){return e.jsxs("div",{className:_("flex flex-col gap-1",o),children:[e.jsx("dt",{className:"text-token-text-primary text-sm font-medium",children:n}),e.jsx("dd",{className:"text-token-text-primary text-sm font-normal",children:t})]})}function oe(){const{environmentId:n}=L(),{eligible:t}=q();return t?e.jsx(I,{to:"/codex/onboarding"}):n?e.jsx(re,{environmentId:n}):e.jsx(C,{})}function re({environmentId:n}){const t=M(),o=j(),[m,r]=V.useState(!1),c=z(l=>l.setEnvironmentId),{data:a,isLoading:g,isError:b}=Y(n),f=Q(),d=f&&a&&a.creator.email===f.email,E=A(),D=ee(),P=E?.name??t.formatMessage({id:"wham.environmentDetailsPage.workspace",defaultMessage:"Workspace"}),h=O(),k=x(h,"2134057841"),N=x(h,"970225264");return e.jsxs(ne,{topPadding:!0,showSidebar:!1,children:[e.jsx("div",{className:"flex flex-col px-8 md:px-16",children:g?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(W,{})}):b?e.jsx(te,{title:t.formatMessage({id:"wham.environmentDetailsPage.errorLoadingEnvironment",defaultMessage:"Error loading environment"}),description:t.formatMessage({id:"wham.environmentDetailsPage.errorLoadingEnvironmentDescription",defaultMessage:"Error loading environment description"})}):a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-token-border-default flex flex-col justify-between gap-2 border-b pb-4",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs(J,{children:[e.jsx(w,{label:t.formatMessage({id:"wham.environmentDetailsPage.environments",defaultMessage:"Environments"}),url:"/codex/settings/environments",className:"text-token-text-tertiary"}),e.jsx(K,{}),e.jsx(w,{label:a.label,url:`/codex/settings/environment/${n}`,className:"text-token-text-primary font-medium"})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(v,{label:d?void 0:t.formatMessage({id:"wham.environmentDetailsPage.deleteEnvironmentTooltip",defaultMessage:"You cannot delete an environment that you did not create"}),children:e.jsx(u,{color:"danger-outline",onClick:()=>r(!0),disabled:!d,"aria-label":t.formatMessage({id:"wham.environmentDetailsPage.deleteEnvironmentAriaLabel",defaultMessage:"Button to delete {environmentName}"},{environmentName:a.label}),children:e.jsx(s,{id:"wham.environmentDetailsPage.deleteEnvironment",defaultMessage:"Delete"})})}),e.jsx(v,{label:d?void 0:t.formatMessage({id:"wham.environmentDetailsPage.editEnvironmentTooltip",defaultMessage:"You cannot edit an environment that you did not create"}),children:e.jsx(u,{icon:Z,onClick:()=>{o(`/codex/settings/environment/${n}/edit`)},color:"secondary",disabled:!d,"aria-label":t.formatMessage({id:"wham.environmentDetailsPage.editEnvironmentAriaLabel",defaultMessage:"Button to edit {environmentName}"},{environmentName:a.label}),children:e.jsx(s,{id:"wham.environmentDetailsPage.editEnvironment",defaultMessage:"Edit"})})}),e.jsx(u,{size:"small",color:"secondary",onClick:()=>{c(n),H.recordClickEnv(),o("/codex")},"aria-label":t.formatMessage({id:"wham.environmentDetailsPage.useEnvironmentAriaLabel",defaultMessage:"Button to use environment {environmentName} in a codex task"},{environmentName:a.label}),children:e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(s,{id:"wham.turnInfoRow.useEnvironment",defaultMessage:"Use this"}),e.jsx(B,{className:"icon-sm"})]})})]})]})}),e.jsx("div",{className:"text-token-text-primary py-8 text-xl",children:a.label}),e.jsxs("div",{className:"grid gap-x-12 gap-y-6 md:grid-cols-2",children:[e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.creator",defaultMessage:"Creator"}),children:a.creator.email}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.image",defaultMessage:"Image"}),children:a.machine.label||e.jsx(s,{id:"wham.environmentDetailsPage.noImage",defaultMessage:"No image"})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.description",defaultMessage:"Description"}),children:a.description??e.jsx(s,{id:"wham.environmentDetailsPage.noDescription",defaultMessage:"N/A"})}),k&&e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.agentNetworkAccess",defaultMessage:"Agent internet access"}),children:a.agent_network_access?.mode==="on"?a.agent_network_access.preset_allowlist===ae?e.jsx(s,{id:"wham.environmentDetailsPage.agentNetworkAccess.unrestricted",defaultMessage:"On: unrestricted"}):a.agent_network_access.preset_allowlist===se?e.jsx(s,{id:"wham.environmentDetailsPage.agentNetworkAccess.codex",defaultMessage:"On: common dependencies"}):e.jsx(s,{id:"wham.environmentDetailsPage.agentNetworkAccess.custom",defaultMessage:"On: custom domains"}):a.agent_network_access==null||a.agent_network_access.mode==="off"?e.jsx(s,{id:"wham.environmentDetailsPage.agentNetworkAccess.off",defaultMessage:"Off"}):null}),N&&e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.setupScriptSnapshotting",defaultMessage:"Setup Script Snapshotting"}),children:a.image_snapshot_settings?.setup_script_snapshot_enabled?e.jsx(s,{id:"wham.environmentDetailsPage.setupScriptSnapshotting.on",defaultMessage:"On"}):e.jsx(s,{id:"wham.environmentDetailsPage.setupScriptSnapshotting.off",defaultMessage:"Off"})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.environmentVariables",defaultMessage:"Environment variables"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:Object.keys(a.env_vars??{}).filter(l=>!l.startsWith("CODEX_ENV_")).join(`
`)})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.secrets",defaultMessage:"Secrets"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:Object.keys(a.secrets??{}).join(`
`)})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.createdAt",defaultMessage:"Created at"}),children:a.created_at?e.jsx($,{value:new Date(a.created_at*1e3),year:"numeric",month:"long",day:"numeric"}):e.jsx(s,{id:"wham.environmentDetailsPage.noCreationDate",defaultMessage:"No creation date"})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.setupScript",defaultMessage:"Setup script"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:(Array.isArray(a.setup)?a.setup:[a.setup]).filter(Boolean).join(`
`)})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.repository",defaultMessage:"Repository"}),children:a.repo_map?Object.values(a.repo_map).map(l=>l.repository_full_name):e.jsx(s,{id:"wham.environmentDetailsPage.noRepository",defaultMessage:"No repository"})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.numTasks",defaultMessage:"No. of tasks"}),children:a.task_count??0}),D&&e.jsx(i,{label:t.formatMessage({id:"94ZVks",defaultMessage:"Share"}),children:a.share_settings==="workspace"?t.formatMessage({id:"wham.environmentDetailsPage.sharedWithWorkspace",defaultMessage:"Shared with {workspaceName}"},{workspaceName:P}):t.formatMessage({id:"wham.environmentDetailsPage.private",defaultMessage:"Private"})})]})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(s,{id:"wham.environmentDetailsPage.environmentNotFound",defaultMessage:"Environment not found"})})}),m&&e.jsx(ie,{environmentId:n,onClose:()=>r(!1)})]})}const Fe=()=>[{title:"Codex"}],Te=R(function(){return e.jsx(oe,{})});export{Te as default,Fe as meta};
//# sourceMappingURL=hu1dfig8blcbcks4.js.map
