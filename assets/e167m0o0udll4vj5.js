import{j6 as A,bk as C,a7 as g,e as y,f as R,aG as O,L as E,b as w,fD as b,P as S,fQ as T}from"./dc2xxjkicf2pz0mj.js";import{p as v,e as x,P as L,r as i,ae as j,j as r,f as k}from"./juy90og0wtbp77qa.js";import{ar as F}from"./ckp56qklot786ulr.js";import{A as D}from"./nr1x4yr151pbkkq3.js";import{C as s}from"./k41q6x5mdrghtds7.js";import"./fkdark0ezkwwm12s.js";import"./ffq4y6btupy3ovkt.js";import"./nqj34k5dky4x5suq.js";const f={pro:"chatgptpro",plus:"chatgptplusplan"},m=Object.keys(s),U={oiw216z:"sora_redirect",vza493q:"operator_redirect"};function I(o){o&&s[o]&&(window.location.href=s[o])}const $=A(function(){const[h]=v(),n=x(),_=C(),{plan:a}=L(),e=h.get("checkout_from"),l=i.useRef(!1),t=g(),u=i.useMemo(()=>t?.subscriptionAnalyticsParams,[t]),M=y(),c=R(M,"1719651090");if(!a||!(a in f))throw j("/");return i.useEffect(()=>{if(!t||l.current)return;if(l.current=!0,e==="vza493q"){t.hasPaidSubscription()&&t.isPro()?window.location.href=s[e]:c||n("/");return}(async()=>{const p=e&&m.includes(e)?U[e]:"purchase_plan_redirect";try{e&&m.includes(e)&&E.setItem(w.CheckoutFrom,e);const d=await F.getCheckoutLink({plan_name:f[a],billing_details:{currency:b}});S.logEvent("Account Pay: Purchase Plan Redirect",{...u,plan:a,location:p}),window.location.href=d.url}catch{T(n,p)}})()},[n,_,a,e,u,c,t]),r.jsxs(r.Fragment,{children:[t&&e==="vza493q"&&c&&r.jsx(D,{currentAccount:t,hasEnterpriseFooter:!1,onClose:()=>I(e),subtitle:P.operatorModalSubtitle,title:P.operatorModalTitle,variant:"operator"}),r.jsx("div",{className:"flex h-full w-full items-center justify-center",children:r.jsx(O,{})})]})}),P=k({operatorModalTitle:{id:"AccountPaymentModal.operatorModalTitle",defaultMessage:"Upgrade to ChatGPT Pro to try Operator"},operatorModalSubtitle:{id:"AccountPaymentModal.operatorModalSubtitle",defaultMessage:"Operator feature is currently only available to Pro users as an early research preview"}});export{$ as default};
//# sourceMappingURL=e167m0o0udll4vj5.js.map
