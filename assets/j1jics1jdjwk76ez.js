import{r as l,j as t}from"./juy90og0wtbp77qa.js";import{bX as x,b2 as p,b3 as _,s as S,N as A,aU as M}from"./dc2xxjkicf2pz0mj.js";import{eW as j,eX as g,eY as v,eG as w,eZ as O,e_ as b,e$ as E,f0 as N,f1 as C,f2 as R}from"./ckp56qklot786ulr.js";import{u as T}from"./m5qpa1z7i5l9dbng.js";function P(o,s){const{automationId:n,automationTitle:e,automationMessage:c}=l.useMemo(()=>{const i=s.find(d=>d.author.role===x.Assistant),r=i?p.getParentPromptNode(_(o),i.id):null;let a=r?.message.metadata;a?.real_author_type||(a=s.find(f=>f.metadata?.real_author_type==="automation")?.metadata);const m=a?.real_author_type==="automation"?a?.real_author_id:null,u=a?.real_author_title;return{automationId:m,automationTitle:u,automationMessage:r?.message}},[o,s]),{automation:y}=T(n??"");return{automationId:n,automation:y,automationTitle:e,automationMessage:c}}function X({clientThreadId:o,messages:s}){const{automationId:n,automation:e,automationTitle:c}=P(o,s),i=j(o).isOdysseyMode||s.some(u=>u.metadata?.n7jupd_message),r=g(o)?.value,{isScheduledRun:a}=l.useContext(v),[h,m]=l.useState(!1);return l.useEffect(()=>{n&&S.count(A.JAWBONE,"jawbone_automation_source_header.open")},[n]),n?a?t.jsx("div",{className:"relative my-2 w-full",children:t.jsx(w,{automation:e,fullWidth:!0})}):i?r===M.REALTIME?null:t.jsx(O,{clientThreadId:o,children:t.jsx(b,{children:({isScheduled:u,isScheduledRun:d})=>u&&d&&t.jsx(E,{})})}):t.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[t.jsx(N,{className:"icon-sm"}),t.jsx("button",{onClick:()=>{m(!0)},children:e?.title??c}),h&&e&&t.jsx(C,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:t.jsx(R,{item:e,source:"chat",onClose:()=>{m(!1)}})})]}):null}export{X as AutomationSourceHeader};
//# sourceMappingURL=j1jics1jdjwk76ez.js.map
