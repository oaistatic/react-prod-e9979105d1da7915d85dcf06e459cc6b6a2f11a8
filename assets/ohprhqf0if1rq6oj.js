import{j6 as I,eh as M,fq as R,$ as E,aT as g,au as F,j0 as B,dM as A}from"./dc2xxjkicf2pz0mj.js";import{P as D,p as H,e as N,r as o,u as O,j as e}from"./juy90og0wtbp77qa.js";import{r as _,t as T,a as p,u as $,s as k,C as y,b as q,g as j,T as L,c as Q,d as K}from"./ckp56qklot786ulr.js";import{g as G,C as V}from"./mohn9bb09oz621dz.js";import{T as W,C as z}from"./mg2nlgj6x6fpxi63.js";import{C as P,T as J}from"./hz1pk536k4y9lgd9.js";import{C as U}from"./o6wb3ptvu0bk81yq.js";import"./f5uxfkqdhg7743lt.js";import"./9k8yv4dhh02fqujo.js";import"./h52yy5f95o7r9b4p.js";import"./l7ivca7g8ik3mk13.js";import"./jy1u8exw8iz2slve.js";import"./f76gy0b8ieo4s693.js";import"./gy64pge8qevmvg7e.js";import"./mia7txooqhkpbw7w.js";import"./dmfmxszxfbs8gsbx.js";import"./gr34ca5bfgzamfz1.js";import"./du2o33bqvziie5hn.js";import"./l7m4sdxmp3n9y1x8.js";import"./e2fyqefjfccaah4p.js";import"./nmh9rh1es9yfc7rh.js";import"./gn1kkezdsm9hi3t4.js";import"./m1q7suu3m36z180t.js";import"./koc3vass6n6349vp.js";import"./ejiu40t686c7js51.js";import"./n6h2c0196v3vnzav.js";import"./pbd6thieshvvjfa0.js";import"./nc631yunytu8n0fx.js";import"./kd37t55r0pqrdrzh.js";import"./f5x7owcyj5iwmbsb.js";import"./llrie03z1kvfi4vu.js";import"./jsgl3b1bt1ozctr5.js";import"./pc2givv05uuq8g6l.js";import"./dq2hdjj12gdqq0p1.js";import"./ezqsz68yx4uzdtqb.js";import"./mre9dehcylnm0d4q.js";import"./ck00y48d3yzt8bq3.js";import"./cwcmrfhs9uzogy8q.js";import"./mq5kqcvga15eqze5.js";import"./bk8slwxjkdlmxjxm.js";import"./lzfgwrifvgqibt3v.js";import"./m36qabefvxegdn1g.js";import"./g8shiwm7jpd74xmd.js";import"./btouzu0b6h5eiejj.js";import"./iacposgqe14fuloa.js";import"./o7zrzew6ugefv8n2.js";import"./abebcwj1m9mup3z6.js";import"./nqj34k5dky4x5suq.js";import"./hort3ndd4wla0a2j.js";import"./hczymk9ojq2shlcf.js";import"./hisrfv493df9w8hp.js";import"./iiyyoj0wgh5vo89i.js";import"./fj1zlpb3ugj147t8.js";const Xe=()=>(_(),null),Ye=I(function(){const r=D(),[s]=H(),l=N(),u=T(r.conversationId),n=p(s.get("readonly"),!1),c=p(s.get("isFullScreen"),!1),d=p(s.get("header"),!0),m=p(s.get("appPreview"),!1),i=M(),C=R(),b=p(s.get("hideBottomComposer"),!!n),a=T(r.canmoreId),t=u,f=$();o.useEffect(()=>{k({type:y.Textdoc,textdocId:a})},[a]),q(t,{kind:E.PrimaryAssistant});const h=O();if(o.useEffect(()=>(g.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),g.releaseThread(t)}),[t,h]),o.useEffect(()=>{a||l("/")},[a,l]),o.useEffect(()=>{j().sendMessage({type:P.Loaded})},[a]),!a||f?.type!==y.Textdoc)return null;const w=()=>{j().sendMessage({type:P.Close})},S=n&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(F,{clientThreadId:t,children:e.jsx(U,{clientThreadId:t,children:e.jsx(L,{clientThreadId:t,children:m?e.jsx(B,{children:e.jsx(X,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(W,{clientThreadId:t,disableScroll:!i,textdocId:f.textdocId}),e.jsx(z,{})]}):e.jsx(J,{isEmbedded:!0,hideRunCode:!i,isFullScreen:c,hideHeader:!d,hideBottomComposer:b,isReadonlyFromQueryParam:n,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:w},"textdocContent")})})})]})}),X=({textdocId:x})=>{const r=o.useRef(null),s=Q(x),[l,u]=o.useState(!1),n=s?.versions??[],c=A(n),d=o.useCallback(K(async m=>{const i=G(m.type,m.content);if(r.current&&(i==="react"||i==="html")){u(!0);const v=r.current.evalAsync({language:i,code:m.content});for await(const C of v)console.debug(C)}u(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(V,{visuallyHidden:!l,ref:r,enableTransition:!0,title:""})};export{Xe as clientLoader,Ye as default};
//# sourceMappingURL=ohprhqf0if1rq6oj.js.map
